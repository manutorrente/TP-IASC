2025-11-22 23:27:48,882 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:27:48,881 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:27:48,883 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:27:49,643 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:27:49,705 - [PORT:9002] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:27:51,229 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:27:51,229 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:27:51,229 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:27:51,709 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:27:51,709 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:27:51,710 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:27:59,567 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:28:01,379 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:01,380 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:01,380 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:01,470 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:28:03,606 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:28:03,607 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:28:03,608 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (2, 'replica'), (1, 'replica')]
2025-11-22 23:28:03,609 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:28:03,610 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:28:03,684 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:28:03,685 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:28:03,687 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (3, 'replica'), (2, 'replica'), (1, 'replica')]
2025-11-22 23:28:03,688 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:28:03,689 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:28:03,768 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:28:03,768 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:28:03,769 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (1, 'master'), (3, 'replica'), (0, 'replica')]
2025-11-22 23:28:03,770 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:28:03,770 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:28:04,132 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:04,133 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:04,134 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:04,672 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:28:08,052 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:08,053 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:08,054 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:13,792 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:13,794 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:13,849 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:14,575 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:28:14,605 - [PORT:9000] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:28:15,693 - [PORT:9000] - __main__ - INFO - Shutting down background tasks...
2025-11-22 23:28:15,693 - [PORT:9000] - services.notification_service - INFO - Notification service loop cancelled
2025-11-22 23:28:15,694 - [PORT:9000] - services.window_service - INFO - Window monitoring loop cancelled
2025-11-22 23:28:15,695 - [PORT:9000] - cluster.modification_history - INFO - Modification history cleanup loop cancelled
2025-11-22 23:28:15,696 - [PORT:9000] - __main__ - INFO - Shutting down cluster manager...
2025-11-22 23:28:15,696 - [PORT:9000] - cluster.cluster_manager - INFO - Shutting down cluster manager...
2025-11-22 23:28:15,697 - [PORT:9000] - cluster.cluster_manager - INFO - Cluster manager shutdown complete
2025-11-22 23:28:15,698 - [PORT:9000] - __main__ - INFO - Application shutdown complete
2025-11-22 23:28:15,702 - [PORT:9000] - services.node_recovery_service - INFO - Health check loop cancelled
2025-11-22 23:28:16,496 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:28:16,498 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:28:16,631 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:16,631 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:16,925 - [PORT:9001] - __main__ - INFO - Shutting down background tasks...
2025-11-22 23:28:16,927 - [PORT:9001] - services.notification_service - INFO - Notification service loop cancelled
2025-11-22 23:28:16,929 - [PORT:9001] - services.window_service - INFO - Window monitoring loop cancelled
2025-11-22 23:28:16,930 - [PORT:9001] - cluster.modification_history - INFO - Modification history cleanup loop cancelled
2025-11-22 23:28:16,932 - [PORT:9001] - __main__ - INFO - Shutting down cluster manager...
2025-11-22 23:28:16,933 - [PORT:9001] - cluster.cluster_manager - INFO - Shutting down cluster manager...
2025-11-22 23:28:16,934 - [PORT:9001] - cluster.cluster_manager - INFO - Cluster manager shutdown complete
2025-11-22 23:28:16,937 - [PORT:9001] - __main__ - INFO - Application shutdown complete
2025-11-22 23:28:16,944 - [PORT:9001] - services.node_recovery_service - INFO - Health check loop cancelled
2025-11-22 23:28:19,169 - [PORT:9002] - __main__ - INFO - Shutting down background tasks...
2025-11-22 23:28:19,170 - [PORT:9002] - services.notification_service - INFO - Notification service loop cancelled
2025-11-22 23:28:19,171 - [PORT:9002] - services.window_service - INFO - Window monitoring loop cancelled
2025-11-22 23:28:19,172 - [PORT:9002] - cluster.modification_history - INFO - Modification history cleanup loop cancelled
2025-11-22 23:28:19,173 - [PORT:9002] - __main__ - INFO - Shutting down cluster manager...
2025-11-22 23:28:19,173 - [PORT:9002] - cluster.cluster_manager - INFO - Shutting down cluster manager...
2025-11-22 23:28:19,174 - [PORT:9002] - cluster.cluster_manager - INFO - Cluster manager shutdown complete
2025-11-22 23:28:19,174 - [PORT:9002] - __main__ - INFO - Application shutdown complete
2025-11-22 23:28:19,179 - [PORT:9002] - services.node_recovery_service - INFO - Health check loop cancelled
2025-11-22 23:28:24,208 - [PORT:9000] - __main__ - INFO - Configured node port: 9000
2025-11-22 23:28:24,209 - [PORT:9000] - __main__ - INFO - Logging to file: C:\Users\Manu\OneDrive\Escritorio\UTN\TP-IASC\app\cluster.log
2025-11-22 23:28:24,215 - [PORT:9000] - __main__ - INFO - Configuring CORS middleware
2025-11-22 23:28:24,215 - [PORT:9000] - __main__ - INFO - Including routers
2025-11-22 23:28:24,228 - [PORT:9000] - __main__ - DEBUG - Operators router included
2025-11-22 23:28:24,240 - [PORT:9000] - __main__ - DEBUG - Users router included
2025-11-22 23:28:24,246 - [PORT:9000] - __main__ - DEBUG - Windows router included
2025-11-22 23:28:24,259 - [PORT:9000] - __main__ - DEBUG - Reservations router included
2025-11-22 23:28:24,265 - [PORT:9000] - __main__ - DEBUG - Cluster router included
2025-11-22 23:28:24,267 - [PORT:9000] - __main__ - INFO - Starting uvicorn server on localhost:9000
2025-11-22 23:28:24,274 - [PORT:9000] - asyncio - DEBUG - Using proactor: IocpProactor
2025-11-22 23:28:24,303 - [PORT:9000] - __main__ - INFO - Starting application lifespan...
2025-11-22 23:28:24,303 - [PORT:9000] - __main__ - INFO - Initializing services with storage
2025-11-22 23:28:24,304 - [PORT:9000] - services.notification_service - DEBUG - Setting storage for NotificationService
2025-11-22 23:28:24,304 - [PORT:9000] - services.window_service - DEBUG - Setting storage for WindowService
2025-11-22 23:28:24,305 - [PORT:9000] - services.window_service - DEBUG - Setting notification service for WindowService
2025-11-22 23:28:24,305 - [PORT:9000] - services.reservation_service - DEBUG - Setting storage for ReservationService
2025-11-22 23:28:24,306 - [PORT:9000] - services.reservation_service - DEBUG - Setting window service for ReservationService
2025-11-22 23:28:24,306 - [PORT:9000] - services.reservation_service - DEBUG - Setting notification service for ReservationService
2025-11-22 23:28:24,307 - [PORT:9000] - services.node_recovery_service - INFO - Storage set for health check service
2025-11-22 23:28:24,307 - [PORT:9000] - __main__ - INFO - Services initialized successfully
2025-11-22 23:28:24,307 - [PORT:9000] - __main__ - INFO - Initializing cluster manager...
2025-11-22 23:28:24,308 - [PORT:9000] - cluster.cluster_manager - INFO - Initializing cluster manager...
2025-11-22 23:28:24,308 - [PORT:9000] - cluster.cluster_manager - INFO - Cluster manager initialized - waiting for shard assignments
2025-11-22 23:28:24,309 - [PORT:9000] - __main__ - INFO - Cluster manager initialized successfully
2025-11-22 23:28:24,309 - [PORT:9000] - __main__ - INFO - Starting background tasks...
2025-11-22 23:28:24,310 - [PORT:9000] - __main__ - INFO - Background tasks started successfully
2025-11-22 23:28:24,311 - [PORT:9000] - services.notification_service - INFO - Starting notification service loop
2025-11-22 23:28:24,311 - [PORT:9000] - services.window_service - INFO - Starting window monitoring loop
2025-11-22 23:28:24,312 - [PORT:9000] - cluster.modification_history - INFO - Starting modification history cleanup loop
2025-11-22 23:28:24,312 - [PORT:9000] - services.node_recovery_service - INFO - Starting health check service
2025-11-22 23:28:24,346 - [PORT:9000] - services.node_recovery_service - INFO - Health check loop started (interval: 30s)
2025-11-22 23:28:24,347 - [PORT:9000] - services.node_recovery_service - DEBUG - No master shards on this node, skipping health check
2025-11-22 23:28:24,532 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:28:24,533 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:28:24,534 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (2, 'replica'), (1, 'replica')]
2025-11-22 23:28:24,535 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:28:24,536 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:28:26,196 - [PORT:9001] - __main__ - INFO - Configured node port: 9001
2025-11-22 23:28:26,197 - [PORT:9001] - __main__ - INFO - Logging to file: C:\Users\Manu\OneDrive\Escritorio\UTN\TP-IASC\app\cluster.log
2025-11-22 23:28:26,199 - [PORT:9001] - __main__ - INFO - Configuring CORS middleware
2025-11-22 23:28:26,200 - [PORT:9001] - __main__ - INFO - Including routers
2025-11-22 23:28:26,209 - [PORT:9001] - __main__ - DEBUG - Operators router included
2025-11-22 23:28:26,236 - [PORT:9001] - __main__ - DEBUG - Users router included
2025-11-22 23:28:26,250 - [PORT:9001] - __main__ - DEBUG - Windows router included
2025-11-22 23:28:26,272 - [PORT:9001] - __main__ - DEBUG - Reservations router included
2025-11-22 23:28:26,289 - [PORT:9001] - __main__ - DEBUG - Cluster router included
2025-11-22 23:28:26,292 - [PORT:9001] - __main__ - INFO - Starting uvicorn server on localhost:9001
2025-11-22 23:28:26,304 - [PORT:9001] - asyncio - DEBUG - Using proactor: IocpProactor
2025-11-22 23:28:26,346 - [PORT:9001] - __main__ - INFO - Starting application lifespan...
2025-11-22 23:28:26,347 - [PORT:9001] - __main__ - INFO - Initializing services with storage
2025-11-22 23:28:26,347 - [PORT:9001] - services.notification_service - DEBUG - Setting storage for NotificationService
2025-11-22 23:28:26,348 - [PORT:9001] - services.window_service - DEBUG - Setting storage for WindowService
2025-11-22 23:28:26,349 - [PORT:9001] - services.window_service - DEBUG - Setting notification service for WindowService
2025-11-22 23:28:26,349 - [PORT:9001] - services.reservation_service - DEBUG - Setting storage for ReservationService
2025-11-22 23:28:26,350 - [PORT:9001] - services.reservation_service - DEBUG - Setting window service for ReservationService
2025-11-22 23:28:26,351 - [PORT:9001] - services.reservation_service - DEBUG - Setting notification service for ReservationService
2025-11-22 23:28:26,351 - [PORT:9001] - services.node_recovery_service - INFO - Storage set for health check service
2025-11-22 23:28:26,352 - [PORT:9001] - __main__ - INFO - Services initialized successfully
2025-11-22 23:28:26,353 - [PORT:9001] - __main__ - INFO - Initializing cluster manager...
2025-11-22 23:28:26,354 - [PORT:9001] - cluster.cluster_manager - INFO - Initializing cluster manager...
2025-11-22 23:28:26,355 - [PORT:9001] - cluster.cluster_manager - INFO - Cluster manager initialized - waiting for shard assignments
2025-11-22 23:28:26,356 - [PORT:9001] - __main__ - INFO - Cluster manager initialized successfully
2025-11-22 23:28:26,356 - [PORT:9001] - __main__ - INFO - Starting background tasks...
2025-11-22 23:28:26,358 - [PORT:9001] - __main__ - INFO - Background tasks started successfully
2025-11-22 23:28:26,359 - [PORT:9001] - services.notification_service - INFO - Starting notification service loop
2025-11-22 23:28:26,360 - [PORT:9001] - services.window_service - INFO - Starting window monitoring loop
2025-11-22 23:28:26,361 - [PORT:9001] - cluster.modification_history - INFO - Starting modification history cleanup loop
2025-11-22 23:28:26,361 - [PORT:9001] - services.node_recovery_service - INFO - Starting health check service
2025-11-22 23:28:26,417 - [PORT:9001] - services.node_recovery_service - INFO - Health check loop started (interval: 30s)
2025-11-22 23:28:26,422 - [PORT:9001] - services.node_recovery_service - DEBUG - No master shards on this node, skipping health check
2025-11-22 23:28:26,514 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:26,514 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:28,582 - [PORT:9002] - __main__ - INFO - Configured node port: 9002
2025-11-22 23:28:28,583 - [PORT:9002] - __main__ - INFO - Logging to file: C:\Users\Manu\OneDrive\Escritorio\UTN\TP-IASC\app\cluster.log
2025-11-22 23:28:28,585 - [PORT:9002] - __main__ - INFO - Configuring CORS middleware
2025-11-22 23:28:28,585 - [PORT:9002] - __main__ - INFO - Including routers
2025-11-22 23:28:28,597 - [PORT:9002] - __main__ - DEBUG - Operators router included
2025-11-22 23:28:28,615 - [PORT:9002] - __main__ - DEBUG - Users router included
2025-11-22 23:28:28,632 - [PORT:9002] - __main__ - DEBUG - Windows router included
2025-11-22 23:28:28,661 - [PORT:9002] - __main__ - DEBUG - Reservations router included
2025-11-22 23:28:28,681 - [PORT:9002] - __main__ - DEBUG - Cluster router included
2025-11-22 23:28:28,685 - [PORT:9002] - __main__ - INFO - Starting uvicorn server on localhost:9002
2025-11-22 23:28:28,700 - [PORT:9002] - asyncio - DEBUG - Using proactor: IocpProactor
2025-11-22 23:28:28,725 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:28:28,726 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:28:28,728 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (1, 'master'), (3, 'replica'), (0, 'replica')]
2025-11-22 23:28:28,729 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:28:28,730 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:28:28,770 - [PORT:9002] - __main__ - INFO - Starting application lifespan...
2025-11-22 23:28:28,771 - [PORT:9002] - __main__ - INFO - Initializing services with storage
2025-11-22 23:28:28,772 - [PORT:9002] - services.notification_service - DEBUG - Setting storage for NotificationService
2025-11-22 23:28:28,773 - [PORT:9002] - services.window_service - DEBUG - Setting storage for WindowService
2025-11-22 23:28:28,774 - [PORT:9002] - services.window_service - DEBUG - Setting notification service for WindowService
2025-11-22 23:28:28,778 - [PORT:9002] - services.reservation_service - DEBUG - Setting storage for ReservationService
2025-11-22 23:28:28,779 - [PORT:9002] - services.reservation_service - DEBUG - Setting window service for ReservationService
2025-11-22 23:28:28,784 - [PORT:9002] - services.reservation_service - DEBUG - Setting notification service for ReservationService
2025-11-22 23:28:28,789 - [PORT:9002] - services.node_recovery_service - INFO - Storage set for health check service
2025-11-22 23:28:28,800 - [PORT:9002] - __main__ - INFO - Services initialized successfully
2025-11-22 23:28:28,801 - [PORT:9002] - __main__ - INFO - Initializing cluster manager...
2025-11-22 23:28:28,802 - [PORT:9002] - cluster.cluster_manager - INFO - Initializing cluster manager...
2025-11-22 23:28:28,803 - [PORT:9002] - cluster.cluster_manager - INFO - Cluster manager initialized - waiting for shard assignments
2025-11-22 23:28:28,805 - [PORT:9002] - __main__ - INFO - Cluster manager initialized successfully
2025-11-22 23:28:28,806 - [PORT:9002] - __main__ - INFO - Starting background tasks...
2025-11-22 23:28:28,809 - [PORT:9002] - __main__ - INFO - Background tasks started successfully
2025-11-22 23:28:28,811 - [PORT:9002] - services.notification_service - INFO - Starting notification service loop
2025-11-22 23:28:28,812 - [PORT:9002] - services.window_service - INFO - Starting window monitoring loop
2025-11-22 23:28:28,814 - [PORT:9002] - cluster.modification_history - INFO - Starting modification history cleanup loop
2025-11-22 23:28:28,816 - [PORT:9002] - services.node_recovery_service - INFO - Starting health check service
2025-11-22 23:28:28,870 - [PORT:9002] - services.node_recovery_service - INFO - Health check loop started (interval: 30s)
2025-11-22 23:28:28,871 - [PORT:9002] - services.node_recovery_service - DEBUG - No master shards on this node, skipping health check
2025-11-22 23:28:29,167 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:29,170 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:29,170 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:33,068 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:33,068 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:33,069 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:38,942 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:38,942 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:38,943 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:39,313 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:28:41,364 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:28:41,717 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:41,717 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:41,719 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:43,829 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:28:45,438 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:28:45,438 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:28:45,439 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (2, 'replica'), (1, 'replica')]
2025-11-22 23:28:45,440 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:28:45,441 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:28:45,512 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:28:45,513 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:28:45,515 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (3, 'replica'), (2, 'replica'), (1, 'replica')]
2025-11-22 23:28:45,517 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:28:45,518 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:28:45,612 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:28:45,612 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:28:45,613 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (1, 'master'), (3, 'replica'), (0, 'replica')]
2025-11-22 23:28:45,614 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:28:45,615 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:28:50,128 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:50,128 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:50,129 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:51,312 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:28:51,312 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:28:51,313 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:28:51,314 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:28:51,315 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:28:54,328 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:28:54,375 - [PORT:9000] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:28:54,410 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:54,410 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:54,412 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:55,478 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:28:55,479 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:28:55,479 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:28:55,480 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:28:55,481 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:28:55,566 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:28:55,567 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:28:55,568 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:28:55,569 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:28:55,570 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:28:55,793 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:55,793 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:55,794 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:28:56,347 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:28:56,442 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:28:58,853 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:28:58,854 - [PORT:9002] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:29:02,621 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:02,622 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:02,622 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:06,854 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:06,854 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:06,856 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:08,191 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:29:08,192 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:29:08,193 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:29:08,194 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:29:08,195 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:29:09,339 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:11,350 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:12,360 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:29:12,361 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:29:12,362 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:29:12,362 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:29:12,363 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:29:12,432 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:29:12,433 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:29:12,434 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:29:12,435 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:29:12,436 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:29:12,675 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:12,676 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:12,676 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:13,871 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:15,139 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:15,140 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:15,141 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:19,332 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:19,334 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:19,335 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:24,357 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:24,403 - [PORT:9000] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:29:25,042 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:29:25,043 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:29:25,043 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:29:25,044 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:29:25,045 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:29:26,350 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:26,459 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:29:27,649 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:27,650 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:27,652 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:28,847 - [PORT:9002] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:29:28,848 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:29,221 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:29:29,222 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:29:29,224 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:29:29,229 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:29:29,231 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:29:29,335 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:29:29,339 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:29:29,341 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:29:29,342 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:29:29,345 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:29:29,603 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:29,602 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:29,605 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:31,813 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:31,813 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:31,813 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:33,800 - [PORT:9000] - routers.users - INFO - Creating user with ID: 6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,801 - [PORT:9000] - routers.users - DEBUG - User object created: id='6703fd2e-e9fd-41ca-bd09-db27ccbc9192' name='Alice Johnson' email='alice@example.com' organization='SpaceTech Research'
2025-11-22 23:29:33,802 - [PORT:9000] - storage - INFO - Adding user: 6703fd2e-e9fd-41ca-bd09-db27ccbc9192 - Alice Johnson
2025-11-22 23:29:33,803 - [PORT:9000] - storage - DEBUG - Acquired lock for user 6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,804 - [PORT:9000] - storage - DEBUG - Starting replication: operation=add, entity_type=user, entity_id=6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,805 - [PORT:9000] - storage - DEBUG - Node is master, converting data to dict
2025-11-22 23:29:33,806 - [PORT:9000] - storage - DEBUG - Data converted successfully: <class 'dict'>
2025-11-22 23:29:33,806 - [PORT:9000] - storage - DEBUG - Calling cluster_manager.replicate_write for user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,807 - [PORT:9000] - cluster.cluster_manager - INFO - [REPLICATION START] user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192 - operation=add
2025-11-22 23:29:33,808 - [PORT:9000] - cluster.cluster_manager - INFO - Replicating add - Entity: user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192 (Shard: 3)
2025-11-22 23:29:33,809 - [PORT:9000] - cluster.cluster_manager - DEBUG - Found 3 available replica nodes for shard 3, need 1 acks
2025-11-22 23:29:33,810 - [PORT:9000] - cluster.cluster_manager - DEBUG - Sending prepare to 3 nodes for user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,812 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9001 - user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,817 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9003 - user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,819 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9002 - user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,821 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9001 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:29:33,823 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:29:33,826 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9002 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:29:33,836 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002471FB2BAD0>
2025-11-22 23:29:33,838 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:33,841 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:33,842 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:33,843 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002471E4CC910>
2025-11-22 23:29:33,846 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:33,849 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:33,848 - [PORT:9001] - routers.cluster - INFO - Preparing write - Operation: add, Entity: user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,851 - [PORT:9001] - routers.cluster - INFO - Write prepared successfully for user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,851 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:33,859 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:33,863 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:33,866 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:33,868 - [PORT:9002] - routers.cluster - INFO - Preparing write - Operation: add, Entity: user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,868 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:33,875 - [PORT:9002] - routers.cluster - INFO - Write prepared successfully for user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:33,879 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:32 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:29:33,891 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9001/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:29:33,898 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:33,900 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:33,903 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:33,908 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:33,910 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9001 - user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192 - status=200, duration=0.098s
2025-11-22 23:29:33,913 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:33 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:29:33,921 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9002/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:29:33,923 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:33,929 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:33,930 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:33,933 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:33,936 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9002 - user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192 - status=200, duration=0.117s
2025-11-22 23:29:36,153 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:29:36,156 - [PORT:9000] - cluster.cluster_manager - WARNING - [PREPARE ERROR] http://localhost:9003 - user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192 - duration=2.338s - ConnectError: All connection attempts failed
2025-11-22 23:29:36,157 - [PORT:9000] - cluster.cluster_manager - WARNING - Node http://localhost:9003 blocked due to exception
2025-11-22 23:29:36,159 - [PORT:9000] - cluster.cluster_manager - INFO - [PREPARE COMPLETE] user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192 - duration=2.346s
2025-11-22 23:29:36,159 - [PORT:9000] - cluster.cluster_manager - INFO - Prepare phase successful, committing to 2 nodes
2025-11-22 23:29:36,164 - [PORT:9000] - cluster.cluster_manager - INFO - [REPLICATION END] user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192 - total_duration=2.356s
2025-11-22 23:29:36,166 - [PORT:9000] - storage - DEBUG - Replication successful for add on user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:36,166 - [PORT:9000] - storage - DEBUG - Recording modification history for user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:36,167 - [PORT:9000] - cluster.modification_history - DEBUG - Recorded modification: user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192 operation:add
2025-11-22 23:29:36,168 - [PORT:9000] - storage - DEBUG - Recorded modification for user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192 operation:add
2025-11-22 23:29:36,173 - [PORT:9000] - storage - INFO - User added successfully: 6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:36,173 - [PORT:9000] - routers.users - INFO - User created successfully: 6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:36,175 - [PORT:9000] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9001 for user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:36,176 - [PORT:9000] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9002 for user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:36,179 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:36,183 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:36,185 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:36,187 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:36,189 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:36,190 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:36,191 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:36,192 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:36,193 - [PORT:9001] - routers.cluster - INFO - Committing write - Entity: user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:36,194 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:36,195 - [PORT:9002] - routers.cluster - INFO - Committing write - Entity: user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:36,195 - [PORT:9001] - routers.cluster - INFO - Write committed successfully for user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:36,196 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:36,197 - [PORT:9002] - routers.cluster - INFO - Write committed successfully for user:6703fd2e-e9fd-41ca-bd09-db27ccbc9192
2025-11-22 23:29:36,201 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:36 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:29:36,205 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9001/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:29:36,206 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:36,208 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:36,218 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:36,220 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:35 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:29:36,226 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9002/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:29:36,227 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:36,229 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:36,230 - [PORT:9000] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9001, updated timestamp
2025-11-22 23:29:36,231 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:36,232 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:36,233 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:36,235 - [PORT:9000] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9002, updated timestamp
2025-11-22 23:29:38,979 - [PORT:9000] - routers.users - INFO - Creating user with ID: 07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:38,980 - [PORT:9000] - routers.users - DEBUG - User object created: id='07a0c31a-0055-4719-b012-d44ea2ac4da7' name='Bob Smith' email='bob@example.com' organization='Orbital Systems Inc'
2025-11-22 23:29:38,981 - [PORT:9000] - storage - INFO - Adding user: 07a0c31a-0055-4719-b012-d44ea2ac4da7 - Bob Smith
2025-11-22 23:29:38,982 - [PORT:9000] - storage - DEBUG - Acquired lock for user 07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:38,982 - [PORT:9000] - storage - DEBUG - Starting replication: operation=add, entity_type=user, entity_id=07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:38,983 - [PORT:9000] - storage - DEBUG - Node is master, converting data to dict
2025-11-22 23:29:38,984 - [PORT:9000] - storage - DEBUG - Data converted successfully: <class 'dict'>
2025-11-22 23:29:38,985 - [PORT:9000] - storage - DEBUG - Calling cluster_manager.replicate_write for user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:38,985 - [PORT:9000] - cluster.cluster_manager - INFO - [REPLICATION START] user:07a0c31a-0055-4719-b012-d44ea2ac4da7 - operation=add
2025-11-22 23:29:38,987 - [PORT:9000] - cluster.cluster_manager - INFO - Replicating add - Entity: user:07a0c31a-0055-4719-b012-d44ea2ac4da7 (Shard: 3)
2025-11-22 23:29:38,988 - [PORT:9000] - cluster.cluster_manager - DEBUG - Found 2 available replica nodes for shard 3, need 1 acks
2025-11-22 23:29:38,988 - [PORT:9000] - cluster.cluster_manager - DEBUG - Sending prepare to 2 nodes for user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:38,989 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9001 - user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:38,991 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9002 - user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:38,994 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:38,995 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:38,997 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:38,998 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:39,000 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:39,000 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:39,002 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:39,003 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:39,004 - [PORT:9001] - routers.cluster - INFO - Preparing write - Operation: add, Entity: user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,004 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:39,006 - [PORT:9001] - routers.cluster - INFO - Write prepared successfully for user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,007 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:39,007 - [PORT:9002] - routers.cluster - INFO - Preparing write - Operation: add, Entity: user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,009 - [PORT:9002] - routers.cluster - INFO - Write prepared successfully for user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,010 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:38 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:29:39,012 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9001/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:29:39,013 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:39,017 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:39,018 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:39,020 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:38 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:29:39,021 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9002/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:29:39,022 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:39,024 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:39,025 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9001 - user:07a0c31a-0055-4719-b012-d44ea2ac4da7 - status=200, duration=0.036s
2025-11-22 23:29:39,026 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:39,027 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:39,028 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:39,029 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9002 - user:07a0c31a-0055-4719-b012-d44ea2ac4da7 - status=200, duration=0.038s
2025-11-22 23:29:39,030 - [PORT:9000] - cluster.cluster_manager - INFO - [PREPARE COMPLETE] user:07a0c31a-0055-4719-b012-d44ea2ac4da7 - duration=0.041s
2025-11-22 23:29:39,031 - [PORT:9000] - cluster.cluster_manager - INFO - Prepare phase successful, committing to 2 nodes
2025-11-22 23:29:39,032 - [PORT:9000] - cluster.cluster_manager - INFO - [REPLICATION END] user:07a0c31a-0055-4719-b012-d44ea2ac4da7 - total_duration=0.047s
2025-11-22 23:29:39,033 - [PORT:9000] - storage - DEBUG - Replication successful for add on user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,034 - [PORT:9000] - storage - DEBUG - Recording modification history for user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,035 - [PORT:9000] - cluster.modification_history - DEBUG - Recorded modification: user:07a0c31a-0055-4719-b012-d44ea2ac4da7 operation:add
2025-11-22 23:29:39,036 - [PORT:9000] - storage - DEBUG - Recorded modification for user:07a0c31a-0055-4719-b012-d44ea2ac4da7 operation:add
2025-11-22 23:29:39,037 - [PORT:9000] - storage - INFO - User added successfully: 07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,038 - [PORT:9000] - routers.users - INFO - User created successfully: 07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,040 - [PORT:9000] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9001 for user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,043 - [PORT:9000] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9002 for user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,046 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:39,048 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:39,050 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:39,051 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:39,052 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:39,054 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:39,057 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:39,059 - [PORT:9001] - routers.cluster - INFO - Committing write - Entity: user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,059 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:39,061 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:39,060 - [PORT:9001] - routers.cluster - INFO - Write committed successfully for user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,063 - [PORT:9002] - routers.cluster - INFO - Committing write - Entity: user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,063 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:39,064 - [PORT:9002] - routers.cluster - INFO - Write committed successfully for user:07a0c31a-0055-4719-b012-d44ea2ac4da7
2025-11-22 23:29:39,066 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:38 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:29:39,069 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9001/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:29:39,070 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:39,072 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:39,073 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:39,075 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:38 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:29:39,079 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9002/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:29:39,080 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:39,081 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:39,081 - [PORT:9000] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9001, updated timestamp
2025-11-22 23:29:39,083 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:39,084 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:39,085 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:39,086 - [PORT:9000] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9002, updated timestamp
2025-11-22 23:29:39,383 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:40,305 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:40,306 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:40,306 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:41,347 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:41,943 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:29:41,943 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:29:41,944 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:29:41,945 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:29:41,946 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:29:42,257 - [PORT:9001] - routers.users - INFO - Creating user with ID: e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,258 - [PORT:9001] - routers.users - DEBUG - User object created: id='e3b48fbb-016b-4ac5-b8aa-25bfd96a3324' name='Carol Martinez' email='carol@example.com' organization='Satellite Innovations'
2025-11-22 23:29:42,259 - [PORT:9001] - storage - INFO - Adding user: e3b48fbb-016b-4ac5-b8aa-25bfd96a3324 - Carol Martinez
2025-11-22 23:29:42,260 - [PORT:9001] - storage - DEBUG - Acquired lock for user e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,261 - [PORT:9001] - storage - DEBUG - Starting replication: operation=add, entity_type=user, entity_id=e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,261 - [PORT:9001] - storage - DEBUG - Node is master, converting data to dict
2025-11-22 23:29:42,262 - [PORT:9001] - storage - DEBUG - Data converted successfully: <class 'dict'>
2025-11-22 23:29:42,263 - [PORT:9001] - storage - DEBUG - Calling cluster_manager.replicate_write for user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,265 - [PORT:9001] - cluster.cluster_manager - INFO - [REPLICATION START] user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324 - operation=add
2025-11-22 23:29:42,266 - [PORT:9001] - cluster.cluster_manager - INFO - Replicating add - Entity: user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324 (Shard: 1)
2025-11-22 23:29:42,268 - [PORT:9001] - cluster.cluster_manager - DEBUG - Found 2 available replica nodes for shard 1, need 1 acks
2025-11-22 23:29:42,268 - [PORT:9001] - cluster.cluster_manager - DEBUG - Sending prepare to 2 nodes for user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,269 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9002 - user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,272 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9000 - user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,275 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9002 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:29:42,278 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9000 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:29:42,287 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000220B389E650>
2025-11-22 23:29:42,289 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000220B3919050>
2025-11-22 23:29:42,291 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:42,293 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:42,295 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:42,299 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:42,300 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:42,302 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:42,304 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:42,306 - [PORT:9002] - routers.cluster - INFO - Preparing write - Operation: add, Entity: user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,307 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:42,309 - [PORT:9002] - routers.cluster - INFO - Write prepared successfully for user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,311 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:42,314 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:42,314 - [PORT:9000] - routers.cluster - INFO - Preparing write - Operation: add, Entity: user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,316 - [PORT:9000] - routers.cluster - INFO - Write prepared successfully for user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,318 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:41 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:29:42,321 - [PORT:9001] - httpx - INFO - HTTP Request: POST http://localhost:9002/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:29:42,323 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:42,325 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:42,326 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:42,328 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:42,331 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9002 - user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324 - status=200, duration=0.062s
2025-11-22 23:29:42,334 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:41 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:29:42,339 - [PORT:9001] - httpx - INFO - HTTP Request: POST http://localhost:9000/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:29:42,340 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:42,342 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:42,344 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:42,345 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:42,347 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9000 - user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324 - status=200, duration=0.075s
2025-11-22 23:29:42,350 - [PORT:9001] - cluster.cluster_manager - INFO - [PREPARE COMPLETE] user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324 - duration=0.081s
2025-11-22 23:29:42,352 - [PORT:9001] - cluster.cluster_manager - INFO - Prepare phase successful, committing to 2 nodes
2025-11-22 23:29:42,353 - [PORT:9001] - cluster.cluster_manager - INFO - [REPLICATION END] user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324 - total_duration=0.088s
2025-11-22 23:29:42,357 - [PORT:9001] - storage - DEBUG - Replication successful for add on user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,359 - [PORT:9001] - storage - DEBUG - Recording modification history for user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,360 - [PORT:9001] - cluster.modification_history - DEBUG - Recorded modification: user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324 operation:add
2025-11-22 23:29:42,361 - [PORT:9001] - storage - DEBUG - Recorded modification for user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324 operation:add
2025-11-22 23:29:42,364 - [PORT:9001] - storage - INFO - User added successfully: e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,365 - [PORT:9001] - routers.users - INFO - User created successfully: e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,369 - [PORT:9001] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9002 for user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,375 - [PORT:9001] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9000 for user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,381 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:42,385 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:42,392 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:42,395 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:42,399 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:42,401 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:42,403 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:42,405 - [PORT:9002] - routers.cluster - INFO - Committing write - Entity: user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,409 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:42,410 - [PORT:9002] - routers.cluster - INFO - Write committed successfully for user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,416 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:42,418 - [PORT:9000] - routers.cluster - INFO - Committing write - Entity: user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,420 - [PORT:9000] - routers.cluster - INFO - Write committed successfully for user:e3b48fbb-016b-4ac5-b8aa-25bfd96a3324
2025-11-22 23:29:42,418 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:42,424 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:41 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:29:42,426 - [PORT:9001] - httpx - INFO - HTTP Request: POST http://localhost:9002/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:29:42,428 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:42,430 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:42,432 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:42,437 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:41 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:29:42,440 - [PORT:9001] - httpx - INFO - HTTP Request: POST http://localhost:9000/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:29:42,442 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:42,443 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:42,445 - [PORT:9001] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9002, updated timestamp
2025-11-22 23:29:42,447 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:42,449 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:42,450 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:42,451 - [PORT:9001] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9000, updated timestamp
2025-11-22 23:29:43,864 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:44,307 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:44,308 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:44,309 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:46,116 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:29:46,117 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:29:46,117 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:29:46,118 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:29:46,118 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:29:46,161 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:29:46,162 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:29:46,163 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:29:46,164 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:29:46,164 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:29:46,373 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:46,375 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:46,375 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:52,753 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:52,754 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:52,755 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:54,391 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:54,392 - [PORT:9000] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:29:54,393 - [PORT:9000] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [3])
2025-11-22 23:29:54,394 - [PORT:9000] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:29:54,395 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:29:56,364 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:56,442 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:29:56,721 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:29:56,723 - [PORT:9000] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:29:56,724 - [PORT:9000] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:29:56,789 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:56,789 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:56,790 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:29:58,695 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:29:58,696 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:29:58,697 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:29:58,698 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:29:58,698 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:29:58,853 - [PORT:9002] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:29:58,854 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:29:59,008 - [PORT:9002] - routers.operators - INFO - Creating operator: be324830-93c8-47b0-91c9-e518ec790573 - SkyView Satellites (contact@skyview.com)
2025-11-22 23:29:59,009 - [PORT:9002] - storage - INFO - Adding operator: be324830-93c8-47b0-91c9-e518ec790573 - SkyView Satellites
2025-11-22 23:29:59,010 - [PORT:9002] - storage - DEBUG - Starting replication: operation=add, entity_type=operator, entity_id=be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:29:59,011 - [PORT:9002] - storage - DEBUG - Node is master, converting data to dict
2025-11-22 23:29:59,012 - [PORT:9002] - storage - DEBUG - Data converted successfully: <class 'dict'>
2025-11-22 23:29:59,012 - [PORT:9002] - storage - DEBUG - Calling cluster_manager.replicate_write for operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:29:59,013 - [PORT:9002] - cluster.cluster_manager - INFO - [REPLICATION START] operator:be324830-93c8-47b0-91c9-e518ec790573 - operation=add
2025-11-22 23:29:59,014 - [PORT:9002] - cluster.cluster_manager - INFO - Replicating add - Entity: operator:be324830-93c8-47b0-91c9-e518ec790573 (Shard: 0)
2025-11-22 23:29:59,015 - [PORT:9002] - cluster.cluster_manager - DEBUG - Found 3 available replica nodes for shard 0, need 1 acks
2025-11-22 23:29:59,016 - [PORT:9002] - cluster.cluster_manager - DEBUG - Sending prepare to 3 nodes for operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:29:59,017 - [PORT:9002] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9001 - operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:29:59,019 - [PORT:9002] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9003 - operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:29:59,021 - [PORT:9002] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9000 - operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:29:59,024 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9001 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:29:59,026 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:29:59,028 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9000 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:29:59,035 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000021BDB52F210>
2025-11-22 23:29:59,036 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:59,038 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:59,039 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:59,041 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:59,041 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:59,042 - [PORT:9001] - routers.cluster - INFO - Preparing write - Operation: add, Entity: operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:29:59,043 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000021BDB313ED0>
2025-11-22 23:29:59,043 - [PORT:9001] - routers.cluster - INFO - Write prepared successfully for operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:29:59,045 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:29:59,046 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:29:59,047 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:29:59,049 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:29:59,049 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:29:59,050 - [PORT:9000] - routers.cluster - INFO - Preparing write - Operation: add, Entity: operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:29:59,052 - [PORT:9000] - routers.cluster - INFO - Write prepared successfully for operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:29:59,052 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:58 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:29:59,056 - [PORT:9002] - httpx - INFO - HTTP Request: POST http://localhost:9001/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:29:59,058 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:59,059 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:59,060 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:59,062 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:59,064 - [PORT:9002] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9001 - operator:be324830-93c8-47b0-91c9-e518ec790573 - status=200, duration=0.047s
2025-11-22 23:29:59,065 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:29:58 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:29:59,067 - [PORT:9002] - httpx - INFO - HTTP Request: POST http://localhost:9000/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:29:59,068 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:29:59,069 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:29:59,070 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:29:59,072 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:29:59,074 - [PORT:9002] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9000 - operator:be324830-93c8-47b0-91c9-e518ec790573 - status=200, duration=0.053s
2025-11-22 23:30:01,315 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:30:01,317 - [PORT:9002] - cluster.cluster_manager - WARNING - [PREPARE ERROR] http://localhost:9003 - operator:be324830-93c8-47b0-91c9-e518ec790573 - duration=2.298s - ConnectError: All connection attempts failed
2025-11-22 23:30:01,318 - [PORT:9002] - cluster.cluster_manager - WARNING - Node http://localhost:9003 blocked due to exception
2025-11-22 23:30:01,320 - [PORT:9002] - cluster.cluster_manager - INFO - [PREPARE COMPLETE] operator:be324830-93c8-47b0-91c9-e518ec790573 - duration=2.302s
2025-11-22 23:30:01,321 - [PORT:9002] - cluster.cluster_manager - INFO - Prepare phase successful, committing to 2 nodes
2025-11-22 23:30:01,322 - [PORT:9002] - cluster.cluster_manager - INFO - [REPLICATION END] operator:be324830-93c8-47b0-91c9-e518ec790573 - total_duration=2.309s
2025-11-22 23:30:01,323 - [PORT:9002] - storage - DEBUG - Replication successful for add on operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:01,324 - [PORT:9002] - storage - DEBUG - Recording modification history for operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:01,325 - [PORT:9002] - cluster.modification_history - DEBUG - Recorded modification: operator:be324830-93c8-47b0-91c9-e518ec790573 operation:add
2025-11-22 23:30:01,326 - [PORT:9002] - storage - DEBUG - Recorded modification for operator:be324830-93c8-47b0-91c9-e518ec790573 operation:add
2025-11-22 23:30:01,327 - [PORT:9002] - storage - INFO - Operator added successfully: be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:01,331 - [PORT:9002] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9001 for operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:01,333 - [PORT:9002] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9000 for operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:01,335 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:01,337 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:01,339 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:01,340 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:01,341 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:01,342 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:01,344 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:01,345 - [PORT:9001] - routers.cluster - INFO - Committing write - Entity: operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:01,345 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:01,346 - [PORT:9001] - routers.cluster - INFO - Write committed successfully for operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:01,348 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:01,349 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:01,349 - [PORT:9000] - routers.cluster - INFO - Committing write - Entity: operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:01,351 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:00 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:30:01,351 - [PORT:9000] - routers.cluster - INFO - Write committed successfully for operator:be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:01,353 - [PORT:9002] - httpx - INFO - HTTP Request: POST http://localhost:9001/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:30:01,355 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:01,357 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:01,358 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:01,360 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:00 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:30:01,361 - [PORT:9002] - httpx - INFO - HTTP Request: POST http://localhost:9000/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:30:01,364 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:01,365 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:01,366 - [PORT:9002] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9001, updated timestamp
2025-11-22 23:30:01,368 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:01,369 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:01,370 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:01,371 - [PORT:9002] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9000, updated timestamp
2025-11-22 23:30:02,915 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:30:02,915 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:30:02,915 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:30:02,915 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:30:02,916 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:30:02,959 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:30:02,961 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:30:02,962 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:30:02,963 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:30:02,964 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:30:03,179 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:03,182 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:03,182 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:05,210 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:05,210 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:05,211 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:06,423 - [PORT:9000] - routers.operators - INFO - Creating operator: ac00c31c-8bec-4314-84d8-b3c9bc4fda3c - OrbitWatch Systems (info@orbitwatch.com)
2025-11-22 23:30:06,424 - [PORT:9000] - storage - INFO - Adding operator: ac00c31c-8bec-4314-84d8-b3c9bc4fda3c - OrbitWatch Systems
2025-11-22 23:30:06,425 - [PORT:9000] - storage - DEBUG - Starting replication: operation=add, entity_type=operator, entity_id=ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,425 - [PORT:9000] - storage - DEBUG - Node is master, converting data to dict
2025-11-22 23:30:06,426 - [PORT:9000] - storage - DEBUG - Data converted successfully: <class 'dict'>
2025-11-22 23:30:06,427 - [PORT:9000] - storage - DEBUG - Calling cluster_manager.replicate_write for operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,428 - [PORT:9000] - cluster.cluster_manager - INFO - [REPLICATION START] operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c - operation=add
2025-11-22 23:30:06,429 - [PORT:9000] - cluster.cluster_manager - INFO - Replicating add - Entity: operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c (Shard: 3)
2025-11-22 23:30:06,431 - [PORT:9000] - cluster.cluster_manager - DEBUG - Found 2 available replica nodes for shard 3, need 1 acks
2025-11-22 23:30:06,432 - [PORT:9000] - cluster.cluster_manager - DEBUG - Sending prepare to 2 nodes for operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,433 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9001 - operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,437 - [PORT:9000] - httpcore.connection - DEBUG - close.started
2025-11-22 23:30:06,438 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9002 - operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,440 - [PORT:9000] - httpcore.connection - DEBUG - close.complete
2025-11-22 23:30:06,441 - [PORT:9000] - httpcore.connection - DEBUG - close.started
2025-11-22 23:30:06,442 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9002 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:30:06,444 - [PORT:9000] - httpcore.connection - DEBUG - close.complete
2025-11-22 23:30:06,446 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9001 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:30:06,451 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002471FB44550>
2025-11-22 23:30:06,453 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:06,456 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:06,458 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:06,460 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:06,462 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:06,462 - [PORT:9002] - routers.cluster - INFO - Preparing write - Operation: add, Entity: operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,463 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000002471FB44590>
2025-11-22 23:30:06,465 - [PORT:9002] - routers.cluster - INFO - Write prepared successfully for operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,468 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:06,470 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:06,472 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:06,478 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:06,481 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:06,480 - [PORT:9001] - routers.cluster - INFO - Preparing write - Operation: add, Entity: operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,486 - [PORT:9001] - routers.cluster - INFO - Write prepared successfully for operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,484 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:06 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:30:06,490 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9002/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:30:06,491 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:06,494 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:06,496 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:06,498 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:06,500 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9002 - operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c - status=200, duration=0.062s
2025-11-22 23:30:06,503 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:05 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:30:06,505 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9001/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:30:06,506 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:06,508 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:06,511 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:06,512 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:06,513 - [PORT:9000] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9001 - operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c - status=200, duration=0.080s
2025-11-22 23:30:06,515 - [PORT:9000] - cluster.cluster_manager - INFO - [PREPARE COMPLETE] operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c - duration=0.083s
2025-11-22 23:30:06,517 - [PORT:9000] - cluster.cluster_manager - INFO - Prepare phase successful, committing to 2 nodes
2025-11-22 23:30:06,519 - [PORT:9000] - cluster.cluster_manager - INFO - [REPLICATION END] operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c - total_duration=0.090s
2025-11-22 23:30:06,520 - [PORT:9000] - storage - DEBUG - Replication successful for add on operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,522 - [PORT:9000] - storage - DEBUG - Recording modification history for operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,523 - [PORT:9000] - cluster.modification_history - DEBUG - Recorded modification: operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c operation:add
2025-11-22 23:30:06,525 - [PORT:9000] - storage - DEBUG - Recorded modification for operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c operation:add
2025-11-22 23:30:06,528 - [PORT:9000] - storage - INFO - Operator added successfully: ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,531 - [PORT:9000] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9001 for operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,534 - [PORT:9000] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9002 for operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,538 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:06,539 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:06,542 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:06,544 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:06,546 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:06,547 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:06,549 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:06,550 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:06,551 - [PORT:9001] - routers.cluster - INFO - Committing write - Entity: operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,555 - [PORT:9000] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:06,555 - [PORT:9001] - routers.cluster - INFO - Write committed successfully for operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,555 - [PORT:9002] - routers.cluster - INFO - Committing write - Entity: operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,556 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:06,559 - [PORT:9002] - routers.cluster - INFO - Write committed successfully for operator:ac00c31c-8bec-4314-84d8-b3c9bc4fda3c
2025-11-22 23:30:06,562 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:05 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:30:06,564 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9001/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:30:06,565 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:06,567 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:06,568 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:06,570 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:06 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:30:06,571 - [PORT:9000] - httpx - INFO - HTTP Request: POST http://localhost:9002/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:30:06,573 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:06,574 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:06,576 - [PORT:9000] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9001, updated timestamp
2025-11-22 23:30:06,577 - [PORT:9000] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:06,578 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:06,579 - [PORT:9000] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:06,580 - [PORT:9000] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9002, updated timestamp
2025-11-22 23:30:08,650 - [PORT:9001] - routers.operators - INFO - Creating operator: a3b81008-bfec-411c-8657-1bea9775c704 - StarLink Observatory (operations@starlink-obs.com)
2025-11-22 23:30:08,651 - [PORT:9001] - storage - INFO - Adding operator: a3b81008-bfec-411c-8657-1bea9775c704 - StarLink Observatory
2025-11-22 23:30:08,652 - [PORT:9001] - storage - DEBUG - Starting replication: operation=add, entity_type=operator, entity_id=a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,652 - [PORT:9001] - storage - DEBUG - Node is master, converting data to dict
2025-11-22 23:30:08,653 - [PORT:9001] - storage - DEBUG - Data converted successfully: <class 'dict'>
2025-11-22 23:30:08,654 - [PORT:9001] - storage - DEBUG - Calling cluster_manager.replicate_write for operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,655 - [PORT:9001] - cluster.cluster_manager - INFO - [REPLICATION START] operator:a3b81008-bfec-411c-8657-1bea9775c704 - operation=add
2025-11-22 23:30:08,656 - [PORT:9001] - cluster.cluster_manager - INFO - Replicating add - Entity: operator:a3b81008-bfec-411c-8657-1bea9775c704 (Shard: 1)
2025-11-22 23:30:08,658 - [PORT:9001] - cluster.cluster_manager - DEBUG - Found 2 available replica nodes for shard 1, need 1 acks
2025-11-22 23:30:08,659 - [PORT:9001] - cluster.cluster_manager - DEBUG - Sending prepare to 2 nodes for operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,660 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9002 - operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,662 - [PORT:9001] - httpcore.connection - DEBUG - close.started
2025-11-22 23:30:08,663 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9000 - operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,667 - [PORT:9001] - httpcore.connection - DEBUG - close.complete
2025-11-22 23:30:08,668 - [PORT:9001] - httpcore.connection - DEBUG - close.started
2025-11-22 23:30:08,669 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9000 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:30:08,671 - [PORT:9001] - httpcore.connection - DEBUG - close.complete
2025-11-22 23:30:08,675 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9002 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:30:08,680 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000220B4E49CD0>
2025-11-22 23:30:08,683 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:08,686 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:08,688 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:08,690 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:08,692 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:08,692 - [PORT:9000] - routers.cluster - INFO - Preparing write - Operation: add, Entity: operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,695 - [PORT:9000] - routers.cluster - INFO - Write prepared successfully for operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,694 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000220B3AC1D90>
2025-11-22 23:30:08,701 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:08,703 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:08,704 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:08,708 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:08,709 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:08,710 - [PORT:9002] - routers.cluster - INFO - Preparing write - Operation: add, Entity: operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,712 - [PORT:9002] - routers.cluster - INFO - Write prepared successfully for operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,711 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:08 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:30:08,719 - [PORT:9001] - httpx - INFO - HTTP Request: POST http://localhost:9000/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:30:08,721 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:08,723 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:08,725 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:08,728 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:08,729 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9000 - operator:a3b81008-bfec-411c-8657-1bea9775c704 - status=200, duration=0.066s
2025-11-22 23:30:08,732 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:08 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:30:08,735 - [PORT:9001] - httpx - INFO - HTTP Request: POST http://localhost:9002/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:30:08,738 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:08,742 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:08,743 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:08,745 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:08,747 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9002 - operator:a3b81008-bfec-411c-8657-1bea9775c704 - status=200, duration=0.087s
2025-11-22 23:30:08,749 - [PORT:9001] - cluster.cluster_manager - INFO - [PREPARE COMPLETE] operator:a3b81008-bfec-411c-8657-1bea9775c704 - duration=0.089s
2025-11-22 23:30:08,750 - [PORT:9001] - cluster.cluster_manager - INFO - Prepare phase successful, committing to 2 nodes
2025-11-22 23:30:08,751 - [PORT:9001] - cluster.cluster_manager - INFO - [REPLICATION END] operator:a3b81008-bfec-411c-8657-1bea9775c704 - total_duration=0.096s
2025-11-22 23:30:08,752 - [PORT:9001] - storage - DEBUG - Replication successful for add on operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,754 - [PORT:9001] - storage - DEBUG - Recording modification history for operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,755 - [PORT:9001] - cluster.modification_history - DEBUG - Recorded modification: operator:a3b81008-bfec-411c-8657-1bea9775c704 operation:add
2025-11-22 23:30:08,757 - [PORT:9001] - storage - DEBUG - Recorded modification for operator:a3b81008-bfec-411c-8657-1bea9775c704 operation:add
2025-11-22 23:30:08,758 - [PORT:9001] - storage - INFO - Operator added successfully: a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,762 - [PORT:9001] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9002 for operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,767 - [PORT:9001] - cluster.cluster_manager - DEBUG - Sending commit to http://localhost:9000 for operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,769 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:08,771 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:08,780 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:08,786 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:08,793 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:08,797 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:08,807 - [PORT:9002] - routers.cluster - INFO - Committing write - Entity: operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,816 - [PORT:9002] - routers.cluster - INFO - Write committed successfully for operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,804 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:08,819 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:08,832 - [PORT:9000] - routers.cluster - INFO - Committing write - Entity: operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,830 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:08,836 - [PORT:9000] - routers.cluster - INFO - Write committed successfully for operator:a3b81008-bfec-411c-8657-1bea9775c704
2025-11-22 23:30:08,837 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:08,840 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:08 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:30:08,844 - [PORT:9001] - httpx - INFO - HTTP Request: POST http://localhost:9002/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:30:08,845 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:08,847 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:08 GMT'), (b'server', b'uvicorn'), (b'content-length', b'22'), (b'content-type', b'application/json')])
2025-11-22 23:30:08,850 - [PORT:9001] - httpx - INFO - HTTP Request: POST http://localhost:9000/cluster/commit "HTTP/1.1 200 OK"
2025-11-22 23:30:08,851 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:08,852 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:08,853 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:08,855 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:08,859 - [PORT:9001] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9002, updated timestamp
2025-11-22 23:30:08,860 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:08,865 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:08,867 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:08,870 - [PORT:9001] - cluster.cluster_manager - DEBUG - Commit sent to http://localhost:9000, updated timestamp
2025-11-22 23:30:09,272 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:09,274 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:09,275 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:09,408 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:11,357 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:13,301 - [PORT:9002] - routers.operators - INFO - Creating window bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 for operator be324830-93c8-47b0-91c9-e518ec790573, satellite: TestSat-X
2025-11-22 23:30:13,302 - [PORT:9002] - storage - DEBUG - Retrieved operator: be324830-93c8-47b0-91c9-e518ec790573 - Found: True
2025-11-22 23:30:13,303 - [PORT:9002] - routers.operators - DEBUG - Created window object: id=bcd2010a-6f85-495c-8c7c-417b8bb5fcc0, operator=be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:13,304 - [PORT:9002] - services.window_service - INFO - Creating window: bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,305 - [PORT:9002] - storage - INFO - Adding window: bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - TestSat-X by operator be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:13,306 - [PORT:9002] - storage - DEBUG - Calling _replicate_and_commit for window: bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,307 - [PORT:9002] - storage - DEBUG - Starting replication: operation=add, entity_type=window, entity_id=bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,308 - [PORT:9002] - storage - INFO - Not master node for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0, finding master and forwarding request
2025-11-22 23:30:13,309 - [PORT:9002] - storage - DEBUG - Entity window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 belongs to shard 1
2025-11-22 23:30:13,310 - [PORT:9002] - storage - DEBUG - Found master node for shard 1: http://localhost:9001
2025-11-22 23:30:13,311 - [PORT:9002] - storage - DEBUG - Found master at http://localhost:9001, forwarding write request
2025-11-22 23:30:13,357 - [PORT:9002] - storage - INFO - [FORWARD-WRITE START] http://localhost:9001 - window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,359 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9001 local_address=None timeout=30.0 socket_options=None
2025-11-22 23:30:13,364 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000021BDC8BC990>
2025-11-22 23:30:13,366 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:13,368 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:13,369 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:13,370 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:13,371 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:13,373 - [PORT:9001] - routers.cluster - INFO - [FORWARD-WRITE HANDLER START] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - operation=add
2025-11-22 23:30:13,374 - [PORT:9001] - routers.cluster - DEBUG - Forwarded write details - Data keys: ['id', 'operator_id', 'satellite_name', 'satellite_type', 'resources', 'window_datetime', 'offer_duration_minutes', 'location', 'created_at', 'status', 'closes_at']
2025-11-22 23:30:13,375 - [PORT:9001] - routers.cluster - DEBUG - Verified this node is master for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,376 - [PORT:9001] - routers.cluster - DEBUG - Retrieved repository for window
2025-11-22 23:30:13,376 - [PORT:9001] - routers.cluster - DEBUG - Deserializing data to Window
2025-11-22 23:30:13,378 - [PORT:9001] - routers.cluster - DEBUG - [DESERIALIZE COMPLETE] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - duration=0.002s
2025-11-22 23:30:13,379 - [PORT:9001] - routers.cluster - DEBUG - Acquired lock for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,380 - [PORT:9001] - routers.cluster - DEBUG - [LOCK ACQUIRED] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,381 - [PORT:9001] - routers.cluster - DEBUG - [PREPARE PHASE COMPLETE] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - duration=0.000s
2025-11-22 23:30:13,382 - [PORT:9001] - routers.cluster - DEBUG - [REPLICATION START] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,383 - [PORT:9001] - cluster.cluster_manager - INFO - [REPLICATION START] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - operation=add
2025-11-22 23:30:13,384 - [PORT:9001] - cluster.cluster_manager - INFO - Replicating add - Entity: window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 (Shard: 1)
2025-11-22 23:30:13,385 - [PORT:9001] - cluster.cluster_manager - DEBUG - Found 2 available replica nodes for shard 1, need 1 acks
2025-11-22 23:30:13,386 - [PORT:9001] - cluster.cluster_manager - DEBUG - Sending prepare to 2 nodes for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,387 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9002 - window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,390 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9000 - window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,392 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:13,394 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:13,395 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:13,396 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:13,397 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:13,397 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:13,399 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:13,400 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:13,400 - [PORT:9002] - routers.cluster - INFO - Preparing write - Operation: add, Entity: window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,401 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:13,402 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:13,403 - [PORT:9000] - routers.cluster - INFO - Preparing write - Operation: add, Entity: window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,404 - [PORT:9000] - routers.cluster - INFO - Write prepared successfully for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:13,407 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:12 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:30:13,409 - [PORT:9001] - httpx - INFO - HTTP Request: POST http://localhost:9000/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:30:13,410 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:13,411 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:13,412 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:13,413 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:13,414 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9000 - window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - status=200, duration=0.024s
2025-11-22 23:30:13,854 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:15,540 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:30:15,540 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:30:15,541 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:30:15,542 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:30:15,542 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:30:17,669 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:17,669 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:17,670 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:19,709 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:30:19,710 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:30:19,710 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:30:19,711 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:30:19,711 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:30:19,748 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:30:19,749 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:30:19,750 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:30:19,750 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:30:19,751 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:30:19,841 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:19,842 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:19,842 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:19,873 - [PORT:9002] - routers.operators - INFO - Creating window bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 for operator be324830-93c8-47b0-91c9-e518ec790573, satellite: TestSat-X
2025-11-22 23:30:19,873 - [PORT:9002] - storage - DEBUG - Retrieved operator: be324830-93c8-47b0-91c9-e518ec790573 - Found: True
2025-11-22 23:30:19,874 - [PORT:9002] - routers.operators - DEBUG - Created window object: id=bcd2010a-6f85-495c-8c7c-417b8bb5fcc0, operator=be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:19,875 - [PORT:9002] - services.window_service - INFO - Creating window: bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:21,730 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:21,733 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:21,733 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:23,409 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-11-22 23:30:23,417 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:23,422 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:23,429 - [PORT:9001] - httpcore.connection - DEBUG - close.started
2025-11-22 23:30:23,431 - [PORT:9001] - httpcore.connection - DEBUG - close.complete
2025-11-22 23:30:23,432 - [PORT:9001] - cluster.cluster_manager - ERROR - [PREPARE TIMEOUT] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - duration=10.044s (timeout=10.0s)
2025-11-22 23:30:23,433 - [PORT:9001] - routers.cluster - ERROR - [REPLICATION FAILED] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - duration=10.051s
2025-11-22 23:30:23,437 - [PORT:9001] - routers.cluster - ERROR - [REPLICATION ERROR] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - duration=10.054s - HTTPException: 500: Failed to replicate write to replicas
Traceback (most recent call last):
  File "C:\Users\Manu\OneDrive\Escritorio\UTN\TP-IASC\app\routers\cluster.py", line 257, in forward_write
    raise HTTPException(status_code=500, detail="Failed to replicate write to replicas")
fastapi.exceptions.HTTPException: 500: Failed to replicate write to replicas
2025-11-22 23:30:23,441 - [PORT:9001] - routers.cluster - WARNING - [FORWARD-WRITE HANDLER HTTP ERROR] duration=10.067s - Replication failed: 500: Failed to replicate write to replicas
2025-11-22 23:30:23,445 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 500, b'Internal Server Error', [(b'date', b'Sun, 23 Nov 2025 02:30:12 GMT'), (b'server', b'uvicorn'), (b'content-length', b'75'), (b'content-type', b'application/json')])
2025-11-22 23:30:23,447 - [PORT:9002] - httpx - INFO - HTTP Request: POST http://localhost:9001/cluster/forward-write "HTTP/1.1 500 Internal Server Error"
2025-11-22 23:30:23,448 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:23,450 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:23,451 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:23,452 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:23,453 - [PORT:9002] - storage - DEBUG - Received response from master: status=500, duration=10.095s
2025-11-22 23:30:23,457 - [PORT:9002] - storage - ERROR - [FORWARD-WRITE FAILED] http://localhost:9001 - window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - status=500, duration=10.095s
2025-11-22 23:30:23,461 - [PORT:9002] - storage - ERROR - Master error response body: {'detail': 'Replication failed: 500: Failed to replicate write to replicas'}
2025-11-22 23:30:23,464 - [PORT:9002] - httpcore.connection - DEBUG - close.started
2025-11-22 23:30:23,469 - [PORT:9002] - httpcore.connection - DEBUG - close.complete
2025-11-22 23:30:23,471 - [PORT:9002] - storage - ERROR - Failed to add window: bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - _replicate_and_commit returned False
2025-11-22 23:30:23,472 - [PORT:9002] - services.window_service - ERROR - Failed to add window bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - storage.windows.add returned False
2025-11-22 23:30:23,476 - [PORT:9002] - routers.operators - ERROR - Failed to create window bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - window_service.create_window returned False
2025-11-22 23:30:23,479 - [PORT:9002] - routers.cluster - INFO - Write prepared successfully for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,481 - [PORT:9002] - storage - INFO - Adding window: bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - TestSat-X by operator be324830-93c8-47b0-91c9-e518ec790573
2025-11-22 23:30:23,482 - [PORT:9002] - storage - DEBUG - Calling _replicate_and_commit for window: bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,485 - [PORT:9002] - storage - DEBUG - Starting replication: operation=add, entity_type=window, entity_id=bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,487 - [PORT:9002] - storage - INFO - Not master node for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0, finding master and forwarding request
2025-11-22 23:30:23,488 - [PORT:9002] - storage - DEBUG - Entity window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 belongs to shard 1
2025-11-22 23:30:23,489 - [PORT:9002] - storage - DEBUG - Found master node for shard 1: http://localhost:9001
2025-11-22 23:30:23,490 - [PORT:9002] - storage - DEBUG - Found master at http://localhost:9001, forwarding write request
2025-11-22 23:30:23,542 - [PORT:9002] - storage - INFO - [FORWARD-WRITE START] http://localhost:9001 - window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,545 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9001 local_address=None timeout=30.0 socket_options=None
2025-11-22 23:30:23,550 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000021BDC8BFFD0>
2025-11-22 23:30:23,552 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:23,555 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:23,556 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:23,559 - [PORT:9002] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:23,561 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:23,561 - [PORT:9001] - routers.cluster - INFO - [FORWARD-WRITE HANDLER START] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - operation=add
2025-11-22 23:30:23,563 - [PORT:9001] - routers.cluster - DEBUG - Forwarded write details - Data keys: ['id', 'operator_id', 'satellite_name', 'satellite_type', 'resources', 'window_datetime', 'offer_duration_minutes', 'location', 'created_at', 'status', 'closes_at']
2025-11-22 23:30:23,564 - [PORT:9001] - routers.cluster - DEBUG - Verified this node is master for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,565 - [PORT:9001] - routers.cluster - DEBUG - Retrieved repository for window
2025-11-22 23:30:23,566 - [PORT:9001] - routers.cluster - DEBUG - Deserializing data to Window
2025-11-22 23:30:23,568 - [PORT:9001] - routers.cluster - DEBUG - [DESERIALIZE COMPLETE] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - duration=0.002s
2025-11-22 23:30:23,569 - [PORT:9001] - routers.cluster - DEBUG - Acquired lock for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,570 - [PORT:9001] - routers.cluster - DEBUG - [LOCK ACQUIRED] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,571 - [PORT:9001] - routers.cluster - DEBUG - [PREPARE PHASE COMPLETE] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - duration=0.000s
2025-11-22 23:30:23,572 - [PORT:9001] - routers.cluster - DEBUG - [REPLICATION START] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,573 - [PORT:9001] - cluster.cluster_manager - INFO - [REPLICATION START] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - operation=add
2025-11-22 23:30:23,578 - [PORT:9001] - cluster.cluster_manager - INFO - Replicating add - Entity: window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 (Shard: 1)
2025-11-22 23:30:23,579 - [PORT:9001] - cluster.cluster_manager - DEBUG - Found 2 available replica nodes for shard 1, need 1 acks
2025-11-22 23:30:23,579 - [PORT:9001] - cluster.cluster_manager - DEBUG - Sending prepare to 2 nodes for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,580 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9002 - window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,583 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SEND START] http://localhost:9000 - window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,585 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9002 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:30:23,587 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9000 local_address=None timeout=15.0 socket_options=None
2025-11-22 23:30:23,592 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000220B4E7AC50>
2025-11-22 23:30:23,598 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:23,600 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:23,602 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:23,604 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:23,605 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:23,606 - [PORT:9002] - routers.cluster - INFO - Preparing write - Operation: add, Entity: window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,606 - [PORT:9001] - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000220B4E7B050>
2025-11-22 23:30:23,607 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-22 23:30:23,609 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-22 23:30:23,610 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-22 23:30:23,611 - [PORT:9001] - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-22 23:30:23,612 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-22 23:30:23,613 - [PORT:9000] - routers.cluster - INFO - Preparing write - Operation: add, Entity: window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,614 - [PORT:9000] - routers.cluster - INFO - Write prepared successfully for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:23,618 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Sun, 23 Nov 2025 02:30:23 GMT'), (b'server', b'uvicorn'), (b'content-length', b'21'), (b'content-type', b'application/json')])
2025-11-22 23:30:23,619 - [PORT:9001] - httpx - INFO - HTTP Request: POST http://localhost:9000/cluster/prepare "HTTP/1.1 200 OK"
2025-11-22 23:30:23,620 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:23,622 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:23,624 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:23,625 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:23,627 - [PORT:9001] - cluster.cluster_manager - DEBUG - [PREPARE SUCCESS] http://localhost:9000 - window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - status=200, duration=0.044s
2025-11-22 23:30:24,416 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:26,370 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:26,464 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:30:26,759 - [PORT:9000] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:30:26,780 - [PORT:9000] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [3])
2025-11-22 23:30:26,825 - [PORT:9000] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:30:26,867 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:30:28,866 - [PORT:9002] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:30:28,867 - [PORT:9002] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [0])
2025-11-22 23:30:28,871 - [PORT:9002] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:30:28,874 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:28,876 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:30:29,157 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:30:29,159 - [PORT:9000] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:30:29,162 - [PORT:9000] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:30:30,259 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:30,260 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:30,265 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:31,182 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:30:31,183 - [PORT:9002] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:30:31,184 - [PORT:9002] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:30:32,198 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:30:32,199 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:30:32,200 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:30:32,201 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:30:32,202 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:30:33,585 - [PORT:9001] - httpcore.http11 - DEBUG - receive_response_headers.failed exception=CancelledError()
2025-11-22 23:30:33,587 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:33,591 - [PORT:9001] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:33,594 - [PORT:9001] - httpcore.connection - DEBUG - close.started
2025-11-22 23:30:33,595 - [PORT:9001] - httpcore.connection - DEBUG - close.complete
2025-11-22 23:30:33,597 - [PORT:9001] - cluster.cluster_manager - ERROR - [PREPARE TIMEOUT] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - duration=10.018s (timeout=10.0s)
2025-11-22 23:30:33,598 - [PORT:9001] - routers.cluster - ERROR - [REPLICATION FAILED] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - duration=10.027s
2025-11-22 23:30:33,599 - [PORT:9001] - routers.cluster - ERROR - [REPLICATION ERROR] window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - duration=10.028s - HTTPException: 500: Failed to replicate write to replicas
Traceback (most recent call last):
  File "C:\Users\Manu\OneDrive\Escritorio\UTN\TP-IASC\app\routers\cluster.py", line 257, in forward_write
    raise HTTPException(status_code=500, detail="Failed to replicate write to replicas")
fastapi.exceptions.HTTPException: 500: Failed to replicate write to replicas
2025-11-22 23:30:33,601 - [PORT:9001] - routers.cluster - WARNING - [FORWARD-WRITE HANDLER HTTP ERROR] duration=10.041s - Replication failed: 500: Failed to replicate write to replicas
2025-11-22 23:30:33,603 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 500, b'Internal Server Error', [(b'date', b'Sun, 23 Nov 2025 02:30:23 GMT'), (b'server', b'uvicorn'), (b'content-length', b'75'), (b'content-type', b'application/json')])
2025-11-22 23:30:33,604 - [PORT:9002] - httpx - INFO - HTTP Request: POST http://localhost:9001/cluster/forward-write "HTTP/1.1 500 Internal Server Error"
2025-11-22 23:30:33,605 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-22 23:30:33,606 - [PORT:9002] - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-22 23:30:33,607 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.started
2025-11-22 23:30:33,608 - [PORT:9002] - httpcore.http11 - DEBUG - response_closed.complete
2025-11-22 23:30:33,608 - [PORT:9002] - storage - DEBUG - Received response from master: status=500, duration=10.067s
2025-11-22 23:30:33,609 - [PORT:9002] - storage - ERROR - [FORWARD-WRITE FAILED] http://localhost:9001 - window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - status=500, duration=10.067s
2025-11-22 23:30:33,610 - [PORT:9002] - storage - ERROR - Master error response body: {'detail': 'Replication failed: 500: Failed to replicate write to replicas'}
2025-11-22 23:30:33,610 - [PORT:9002] - httpcore.connection - DEBUG - close.started
2025-11-22 23:30:33,611 - [PORT:9002] - httpcore.connection - DEBUG - close.complete
2025-11-22 23:30:33,612 - [PORT:9002] - storage - ERROR - Failed to add window: bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - _replicate_and_commit returned False
2025-11-22 23:30:33,613 - [PORT:9002] - services.window_service - ERROR - Failed to add window bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - storage.windows.add returned False
2025-11-22 23:30:33,613 - [PORT:9002] - routers.operators - ERROR - Failed to create window bcd2010a-6f85-495c-8c7c-417b8bb5fcc0 - window_service.create_window returned False
2025-11-22 23:30:33,615 - [PORT:9002] - routers.cluster - INFO - Write prepared successfully for window:bcd2010a-6f85-495c-8c7c-417b8bb5fcc0
2025-11-22 23:30:34,141 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:34,141 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:34,142 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:36,406 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:30:36,406 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:30:36,407 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:30:36,408 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:30:36,408 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:30:36,452 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:30:36,452 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:30:36,452 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:30:36,453 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:30:36,453 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:30:36,572 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:36,573 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:36,574 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:39,427 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:41,382 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:42,757 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:42,757 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:42,758 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:43,887 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:46,721 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:46,724 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:46,724 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:48,988 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:30:48,988 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:30:48,989 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:30:48,990 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:30:48,991 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:30:53,174 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:30:53,175 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:30:53,176 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:30:53,176 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:30:53,177 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:30:53,237 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:30:53,238 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:30:53,238 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:30:53,239 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:30:53,239 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:30:53,362 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:53,363 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:53,364 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:54,448 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:55,235 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:55,236 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:55,237 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:30:56,394 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:56,471 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:30:58,893 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:30:59,146 - [PORT:9000] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:30:59,146 - [PORT:9000] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [3])
2025-11-22 23:30:59,147 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
node: http://localhost:9003
2025-11-22 23:30:59,149 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:30:59,151 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:01,174 - [PORT:9002] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:31:01,174 - [PORT:9002] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [0])
2025-11-22 23:31:01,175 - [PORT:9002] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:31:01,176 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:31:01,456 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:31:01,457 - [PORT:9000] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:31:01,459 - [PORT:9000] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:31:03,473 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:31:03,474 - [PORT:9002] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:31:03,475 - [PORT:9002] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:31:05,722 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:31:05,723 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:31:05,724 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:31:05,724 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:31:05,725 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:31:07,702 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:07,703 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:07,704 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:09,465 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:31:09,855 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:31:09,856 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:31:09,857 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:31:09,858 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:31:09,859 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:31:09,896 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:31:09,897 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:31:09,897 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:31:09,898 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:31:09,899 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:31:10,333 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:10,333 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:10,333 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:11,410 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:31:11,662 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:11,663 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:11,664 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:13,907 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:31:20,617 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:20,624 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:20,625 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:22,644 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:31:22,645 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:31:22,645 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:31:22,646 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:31:22,646 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:31:24,167 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:24,167 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:24,168 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:24,475 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:31:26,413 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:31:26,489 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:31:26,833 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:31:26,833 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:31:26,834 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:31:26,834 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:31:26,835 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:31:26,884 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:31:26,885 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:31:26,886 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:31:26,886 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:31:26,887 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:31:27,189 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:27,192 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:27,193 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:28,912 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:31:31,481 - [PORT:9000] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:31:31,481 - [PORT:9000] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [3])
2025-11-22 23:31:31,482 - [PORT:9000] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:31:31,483 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:31:33,093 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:33,094 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:33,094 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:33,488 - [PORT:9002] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:31:33,488 - [PORT:9002] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [0])
2025-11-22 23:31:33,489 - [PORT:9002] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:31:33,491 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:31:33,780 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:31:33,781 - [PORT:9000] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:31:33,783 - [PORT:9000] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:31:35,805 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:31:35,806 - [PORT:9002] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:31:35,807 - [PORT:9002] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:31:36,644 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:36,647 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:36,649 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:39,487 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:31:39,543 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:31:39,544 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:31:39,546 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:31:39,547 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:31:39,548 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:31:41,416 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:31:43,747 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:31:43,749 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:31:43,750 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:31:43,750 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:31:43,751 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:31:43,818 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:31:43,819 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:31:43,821 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:31:43,826 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:31:43,827 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:31:43,916 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:31:44,252 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:44,253 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:44,253 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:45,556 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:45,557 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:45,558 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:49,094 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:49,094 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:49,094 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:54,487 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:31:56,412 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:31:56,506 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:31:56,569 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:31:56,570 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:31:56,570 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:31:56,571 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:31:56,572 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:31:58,091 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:58,093 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:58,094 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:31:58,899 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:00,782 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:32:00,783 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:32:00,785 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:32:00,786 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:32:00,787 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:32:00,843 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:32:00,844 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:32:00,845 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:32:00,846 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:32:00,847 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:32:01,282 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:01,283 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:01,284 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:01,492 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:01,492 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:01,493 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:03,806 - [PORT:9000] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:32:03,806 - [PORT:9000] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [3])
2025-11-22 23:32:03,807 - [PORT:9000] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:32:03,809 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:32:05,814 - [PORT:9002] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:32:05,815 - [PORT:9002] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [0])
2025-11-22 23:32:05,816 - [PORT:9002] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:32:05,818 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:32:06,125 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:32:06,128 - [PORT:9000] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:32:06,129 - [PORT:9000] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:32:08,131 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:32:08,133 - [PORT:9002] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:32:08,134 - [PORT:9002] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:32:09,508 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:10,575 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:10,575 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:10,576 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:11,424 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:13,613 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:32:13,614 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:32:13,615 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:32:13,615 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:32:13,616 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:32:13,912 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:13,955 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:13,956 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:13,957 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:17,989 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:32:17,993 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:32:17,994 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:32:17,995 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:32:17,996 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:32:18,063 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:32:18,066 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:32:18,067 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:32:18,070 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:32:18,071 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:32:18,352 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:18,353 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:18,353 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:23,052 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:23,055 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:23,055 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:24,521 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:26,424 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:26,438 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:26,438 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:26,439 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:26,516 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:32:29,096 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:30,713 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:32:30,714 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:32:30,715 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:32:30,715 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:32:30,716 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:32:34,879 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:32:34,880 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:32:34,880 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:32:34,881 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:32:34,882 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:32:34,946 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:32:34,947 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:32:34,948 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:32:34,949 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:32:34,950 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:32:35,350 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:35,351 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:35,351 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:35,525 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:35,528 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:35,529 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:36,144 - [PORT:9000] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:32:36,145 - [PORT:9000] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [3])
2025-11-22 23:32:36,147 - [PORT:9000] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:32:36,149 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:32:38,152 - [PORT:9002] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:32:38,154 - [PORT:9002] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [0])
2025-11-22 23:32:38,157 - [PORT:9002] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:32:38,158 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:32:38,435 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:32:38,438 - [PORT:9000] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:32:38,438 - [PORT:9000] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:32:38,960 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:38,960 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:39,546 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:40,459 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:32:40,460 - [PORT:9002] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:32:40,462 - [PORT:9002] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:32:41,434 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:44,104 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:47,639 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:32:47,639 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:32:47,640 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:32:47,641 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:32:47,641 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:32:48,029 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:48,030 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:48,032 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:51,465 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:51,465 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:51,466 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:51,861 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:32:51,861 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:32:51,862 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:32:51,862 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:32:51,863 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:32:51,916 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:32:51,917 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:32:51,918 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:32:51,919 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:32:51,919 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:32:52,360 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:52,362 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:32:54,557 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:56,429 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:32:56,538 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:32:59,100 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:00,672 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:00,674 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:00,676 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:04,164 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:04,166 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:04,166 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:04,702 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:04,703 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:04,703 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:33:04,704 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:04,705 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:33:08,457 - [PORT:9000] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:33:08,460 - [PORT:9000] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [3])
2025-11-22 23:33:08,461 - [PORT:9000] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:33:08,463 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:33:08,886 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:08,886 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:08,887 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:33:08,888 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:08,889 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:33:08,978 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:08,978 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:08,979 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:33:08,980 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:08,980 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:33:09,198 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:09,200 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:09,200 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:09,557 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:10,450 - [PORT:9002] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:33:10,451 - [PORT:9002] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [0])
2025-11-22 23:33:10,452 - [PORT:9002] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:33:10,453 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:33:10,766 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:33:10,767 - [PORT:9000] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:33:10,767 - [PORT:9000] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:33:11,446 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:12,744 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:33:12,745 - [PORT:9002] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:33:12,746 - [PORT:9002] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:33:13,059 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:13,061 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:13,062 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:14,122 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:16,710 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:16,712 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:16,713 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:21,528 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:21,529 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:21,530 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:33:21,530 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:21,531 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:33:24,573 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:25,518 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:25,519 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:25,519 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:25,715 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:25,716 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:25,716 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:33:25,717 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:25,718 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:33:25,750 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:25,752 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:25,753 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:33:25,754 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:25,755 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:33:25,993 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:25,994 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:25,995 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:26,465 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:26,528 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:33:29,126 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:29,158 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:29,159 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:29,161 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:38,022 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:38,023 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:38,025 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:38,359 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:38,360 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:38,361 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:33:38,361 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:38,362 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:33:39,568 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:40,784 - [PORT:9000] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:33:40,785 - [PORT:9000] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [3])
2025-11-22 23:33:40,787 - [PORT:9000] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:33:40,789 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:33:41,466 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:41,661 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:41,661 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:41,663 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:42,538 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:42,538 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:42,539 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:33:42,540 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:42,541 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:33:42,599 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:42,602 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:42,602 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:33:42,603 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:42,603 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:33:42,757 - [PORT:9002] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:33:42,758 - [PORT:9002] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [0])
2025-11-22 23:33:42,760 - [PORT:9002] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:33:42,762 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:33:43,053 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:43,053 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:43,053 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:43,083 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:33:43,085 - [PORT:9000] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:33:43,086 - [PORT:9000] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:33:44,150 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:45,063 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:33:45,064 - [PORT:9002] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:33:45,065 - [PORT:9002] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:33:50,510 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:50,510 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:50,511 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:54,401 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:54,401 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:54,402 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:33:54,588 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:55,365 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:55,366 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:55,367 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:33:55,368 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:55,369 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:33:56,458 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:56,536 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:33:59,157 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:33:59,627 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:59,628 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:59,629 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:33:59,630 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:59,630 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:33:59,694 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:33:59,695 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:33:59,696 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:33:59,697 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:33:59,697 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:34:00,174 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:00,175 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:00,177 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:02,757 - [PORT:9000] - __main__ - INFO - Configured node port: 9000
2025-11-22 23:34:02,757 - [PORT:9000] - __main__ - INFO - Logging to file: C:\Users\Manu\OneDrive\Escritorio\UTN\TP-IASC\app\cluster.log
2025-11-22 23:34:02,758 - [PORT:9000] - __main__ - INFO - Configuring CORS middleware
2025-11-22 23:34:02,758 - [PORT:9000] - __main__ - INFO - Including routers
2025-11-22 23:34:02,763 - [PORT:9000] - __main__ - DEBUG - Operators router included
2025-11-22 23:34:02,770 - [PORT:9000] - __main__ - DEBUG - Users router included
2025-11-22 23:34:02,775 - [PORT:9000] - __main__ - DEBUG - Windows router included
2025-11-22 23:34:02,782 - [PORT:9000] - __main__ - DEBUG - Reservations router included
2025-11-22 23:34:02,787 - [PORT:9000] - __main__ - DEBUG - Cluster router included
2025-11-22 23:34:02,788 - [PORT:9000] - __main__ - INFO - Starting uvicorn server on localhost:9000
2025-11-22 23:34:02,794 - [PORT:9000] - asyncio - DEBUG - Using proactor: IocpProactor
2025-11-22 23:34:02,813 - [PORT:9000] - __main__ - INFO - Starting application lifespan...
2025-11-22 23:34:02,813 - [PORT:9000] - __main__ - INFO - Initializing services with storage
2025-11-22 23:34:02,814 - [PORT:9000] - services.notification_service - DEBUG - Setting storage for NotificationService
2025-11-22 23:34:02,814 - [PORT:9000] - services.window_service - DEBUG - Setting storage for WindowService
2025-11-22 23:34:02,814 - [PORT:9000] - services.window_service - DEBUG - Setting notification service for WindowService
2025-11-22 23:34:02,814 - [PORT:9000] - services.reservation_service - DEBUG - Setting storage for ReservationService
2025-11-22 23:34:02,814 - [PORT:9000] - services.reservation_service - DEBUG - Setting window service for ReservationService
2025-11-22 23:34:02,815 - [PORT:9000] - services.reservation_service - DEBUG - Setting notification service for ReservationService
2025-11-22 23:34:02,815 - [PORT:9000] - services.node_recovery_service - INFO - Storage set for health check service
2025-11-22 23:34:02,815 - [PORT:9000] - __main__ - INFO - Services initialized successfully
2025-11-22 23:34:02,815 - [PORT:9000] - __main__ - INFO - Initializing cluster manager...
2025-11-22 23:34:02,816 - [PORT:9000] - cluster.cluster_manager - INFO - Initializing cluster manager...
2025-11-22 23:34:02,816 - [PORT:9000] - cluster.cluster_manager - INFO - Cluster manager initialized - waiting for shard assignments
2025-11-22 23:34:02,816 - [PORT:9000] - __main__ - INFO - Cluster manager initialized successfully
2025-11-22 23:34:02,816 - [PORT:9000] - __main__ - INFO - Starting background tasks...
2025-11-22 23:34:02,817 - [PORT:9000] - __main__ - INFO - Background tasks started successfully
2025-11-22 23:34:02,817 - [PORT:9000] - services.notification_service - INFO - Starting notification service loop
2025-11-22 23:34:02,817 - [PORT:9000] - services.window_service - INFO - Starting window monitoring loop
2025-11-22 23:34:02,817 - [PORT:9000] - cluster.modification_history - INFO - Starting modification history cleanup loop
2025-11-22 23:34:02,818 - [PORT:9000] - services.node_recovery_service - INFO - Starting health check service
2025-11-22 23:34:02,839 - [PORT:9000] - services.node_recovery_service - INFO - Health check loop started (interval: 30s)
2025-11-22 23:34:02,839 - [PORT:9000] - services.node_recovery_service - DEBUG - No master shards on this node, skipping health check
2025-11-22 23:34:02,853 - [PORT:9000] - __main__ - INFO - Shutting down background tasks...
2025-11-22 23:34:02,853 - [PORT:9000] - services.notification_service - INFO - Notification service loop cancelled
2025-11-22 23:34:02,853 - [PORT:9000] - services.window_service - INFO - Window monitoring loop cancelled
2025-11-22 23:34:02,853 - [PORT:9000] - cluster.modification_history - INFO - Modification history cleanup loop cancelled
2025-11-22 23:34:02,854 - [PORT:9000] - __main__ - INFO - Shutting down cluster manager...
2025-11-22 23:34:02,854 - [PORT:9000] - cluster.cluster_manager - INFO - Shutting down cluster manager...
2025-11-22 23:34:02,862 - [PORT:9000] - cluster.cluster_manager - INFO - Cluster manager shutdown complete
2025-11-22 23:34:02,862 - [PORT:9000] - __main__ - INFO - Application shutdown complete
2025-11-22 23:34:02,863 - [PORT:9000] - services.node_recovery_service - INFO - Health check loop cancelled
2025-11-22 23:34:02,919 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:02,920 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:02,920 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:06,888 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:06,891 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:06,891 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:09,598 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:34:11,483 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:34:12,519 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:34:12,519 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:34:12,520 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:34:12,520 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:34:12,521 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:34:13,094 - [PORT:9000] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:34:13,094 - [PORT:9000] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [3])
2025-11-22 23:34:13,095 - [PORT:9000] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:34:13,097 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:34:14,179 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:34:15,089 - [PORT:9002] - services.node_recovery_service - INFO - Found 1 blocked replica nodes to check
2025-11-22 23:34:15,089 - [PORT:9002] - services.node_recovery_service - INFO - Checking blocked node: http://localhost:9003 (replica of shards: [0])
2025-11-22 23:34:15,090 - [PORT:9002] - services.node_recovery_service - DEBUG - Pinging node: http://localhost:9003
2025-11-22 23:34:15,091 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=9003 local_address=None timeout=5.0 socket_options=None
2025-11-22 23:34:15,387 - [PORT:9000] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:34:15,388 - [PORT:9000] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:34:15,389 - [PORT:9000] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:34:15,554 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:15,555 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:15,555 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:16,945 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:34:16,946 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:34:16,946 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (3, 'replica'), (2, 'replica')]
2025-11-22 23:34:16,947 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:34:16,948 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:34:16,997 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:34:16,998 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:34:16,999 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'master'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:34:17,000 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:34:17,000 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:34:17,405 - [PORT:9002] - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-11-22 23:34:17,407 - [PORT:9002] - services.node_recovery_service - DEBUG - Node http://localhost:9003 ping failed with error: All connection attempts failed
2025-11-22 23:34:17,408 - [PORT:9002] - services.node_recovery_service - WARNING - Node http://localhost:9003 did not respond to ping
2025-11-22 23:34:17,422 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:17,424 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:17,425 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:19,281 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:19,281 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:19,282 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:34:49,305 - [PORT:9000] - __main__ - INFO - Configured node port: 9000
2025-11-22 23:34:49,306 - [PORT:9000] - __main__ - INFO - Logging to file: C:\Users\Manu\OneDrive\Escritorio\UTN\TP-IASC\app\cluster.log
2025-11-22 23:34:49,307 - [PORT:9000] - __main__ - INFO - Configuring CORS middleware
2025-11-22 23:34:49,307 - [PORT:9000] - __main__ - INFO - Including routers
2025-11-22 23:34:49,311 - [PORT:9000] - __main__ - DEBUG - Operators router included
2025-11-22 23:34:49,320 - [PORT:9000] - __main__ - DEBUG - Users router included
2025-11-22 23:34:49,325 - [PORT:9000] - __main__ - DEBUG - Windows router included
2025-11-22 23:34:49,341 - [PORT:9000] - __main__ - DEBUG - Reservations router included
2025-11-22 23:34:49,353 - [PORT:9000] - __main__ - DEBUG - Cluster router included
2025-11-22 23:34:49,354 - [PORT:9000] - __main__ - INFO - Starting uvicorn server on localhost:9000
2025-11-22 23:34:49,359 - [PORT:9000] - asyncio - DEBUG - Using proactor: IocpProactor
2025-11-22 23:34:49,390 - [PORT:9000] - __main__ - INFO - Starting application lifespan...
2025-11-22 23:34:49,390 - [PORT:9000] - __main__ - INFO - Initializing services with storage
2025-11-22 23:34:49,390 - [PORT:9000] - services.notification_service - DEBUG - Setting storage for NotificationService
2025-11-22 23:34:49,391 - [PORT:9000] - services.window_service - DEBUG - Setting storage for WindowService
2025-11-22 23:34:49,391 - [PORT:9000] - services.window_service - DEBUG - Setting notification service for WindowService
2025-11-22 23:34:49,391 - [PORT:9000] - services.reservation_service - DEBUG - Setting storage for ReservationService
2025-11-22 23:34:49,391 - [PORT:9000] - services.reservation_service - DEBUG - Setting window service for ReservationService
2025-11-22 23:34:49,392 - [PORT:9000] - services.reservation_service - DEBUG - Setting notification service for ReservationService
2025-11-22 23:34:49,392 - [PORT:9000] - services.node_recovery_service - INFO - Storage set for health check service
2025-11-22 23:34:49,393 - [PORT:9000] - __main__ - INFO - Services initialized successfully
2025-11-22 23:34:49,393 - [PORT:9000] - __main__ - INFO - Initializing cluster manager...
2025-11-22 23:34:49,393 - [PORT:9000] - cluster.cluster_manager - INFO - Initializing cluster manager...
2025-11-22 23:34:49,393 - [PORT:9000] - cluster.cluster_manager - INFO - Cluster manager initialized - waiting for shard assignments
2025-11-22 23:34:49,394 - [PORT:9000] - __main__ - INFO - Cluster manager initialized successfully
2025-11-22 23:34:49,396 - [PORT:9000] - __main__ - INFO - Starting background tasks...
2025-11-22 23:34:49,398 - [PORT:9000] - __main__ - INFO - Background tasks started successfully
2025-11-22 23:34:49,399 - [PORT:9000] - services.notification_service - INFO - Starting notification service loop
2025-11-22 23:34:49,400 - [PORT:9000] - services.window_service - INFO - Starting window monitoring loop
2025-11-22 23:34:49,400 - [PORT:9000] - cluster.modification_history - INFO - Starting modification history cleanup loop
2025-11-22 23:34:49,401 - [PORT:9000] - services.node_recovery_service - INFO - Starting health check service
2025-11-22 23:34:49,453 - [PORT:9000] - services.node_recovery_service - INFO - Health check loop started (interval: 30s)
2025-11-22 23:34:49,455 - [PORT:9000] - services.node_recovery_service - DEBUG - No master shards on this node, skipping health check
2025-11-22 23:35:04,415 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:35:15,109 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:17,795 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:35:17,796 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:35:17,797 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:35:17,798 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:35:17,799 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:35:18,092 - [PORT:9001] - __main__ - INFO - Configured node port: 9001
2025-11-22 23:35:18,093 - [PORT:9001] - __main__ - INFO - Logging to file: C:\Users\Manu\OneDrive\Escritorio\UTN\TP-IASC\app\cluster.log
2025-11-22 23:35:18,094 - [PORT:9001] - __main__ - INFO - Configuring CORS middleware
2025-11-22 23:35:18,095 - [PORT:9001] - __main__ - INFO - Including routers
2025-11-22 23:35:18,106 - [PORT:9001] - __main__ - DEBUG - Operators router included
2025-11-22 23:35:18,123 - [PORT:9001] - __main__ - DEBUG - Users router included
2025-11-22 23:35:18,136 - [PORT:9001] - __main__ - DEBUG - Windows router included
2025-11-22 23:35:18,154 - [PORT:9001] - __main__ - DEBUG - Reservations router included
2025-11-22 23:35:18,166 - [PORT:9001] - __main__ - DEBUG - Cluster router included
2025-11-22 23:35:18,168 - [PORT:9001] - __main__ - INFO - Starting uvicorn server on localhost:9001
2025-11-22 23:35:18,180 - [PORT:9001] - asyncio - DEBUG - Using proactor: IocpProactor
2025-11-22 23:35:18,228 - [PORT:9001] - __main__ - INFO - Starting application lifespan...
2025-11-22 23:35:18,228 - [PORT:9001] - __main__ - INFO - Initializing services with storage
2025-11-22 23:35:18,229 - [PORT:9001] - services.notification_service - DEBUG - Setting storage for NotificationService
2025-11-22 23:35:18,229 - [PORT:9001] - services.window_service - DEBUG - Setting storage for WindowService
2025-11-22 23:35:18,229 - [PORT:9001] - services.window_service - DEBUG - Setting notification service for WindowService
2025-11-22 23:35:18,230 - [PORT:9001] - services.reservation_service - DEBUG - Setting storage for ReservationService
2025-11-22 23:35:18,230 - [PORT:9001] - services.reservation_service - DEBUG - Setting window service for ReservationService
2025-11-22 23:35:18,230 - [PORT:9001] - services.reservation_service - DEBUG - Setting notification service for ReservationService
2025-11-22 23:35:18,231 - [PORT:9001] - services.node_recovery_service - INFO - Storage set for health check service
2025-11-22 23:35:18,231 - [PORT:9001] - __main__ - INFO - Services initialized successfully
2025-11-22 23:35:18,231 - [PORT:9001] - __main__ - INFO - Initializing cluster manager...
2025-11-22 23:35:18,232 - [PORT:9001] - cluster.cluster_manager - INFO - Initializing cluster manager...
2025-11-22 23:35:18,232 - [PORT:9001] - cluster.cluster_manager - INFO - Cluster manager initialized - waiting for shard assignments
2025-11-22 23:35:18,233 - [PORT:9001] - __main__ - INFO - Cluster manager initialized successfully
2025-11-22 23:35:18,233 - [PORT:9001] - __main__ - INFO - Starting background tasks...
2025-11-22 23:35:18,234 - [PORT:9001] - __main__ - INFO - Background tasks started successfully
2025-11-22 23:35:18,236 - [PORT:9001] - services.notification_service - INFO - Starting notification service loop
2025-11-22 23:35:18,237 - [PORT:9001] - services.window_service - INFO - Starting window monitoring loop
2025-11-22 23:35:18,239 - [PORT:9001] - cluster.modification_history - INFO - Starting modification history cleanup loop
2025-11-22 23:35:18,240 - [PORT:9001] - services.node_recovery_service - INFO - Starting health check service
2025-11-22 23:35:18,293 - [PORT:9001] - services.node_recovery_service - INFO - Health check loop started (interval: 30s)
2025-11-22 23:35:18,294 - [PORT:9001] - services.node_recovery_service - DEBUG - No master shards on this node, skipping health check
2025-11-22 23:35:18,388 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:35:18,389 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:35:18,390 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:35:18,391 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:35:18,392 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:35:19,409 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:35:19,441 - [PORT:9000] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:35:20,700 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:35:20,701 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:35:20,701 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (0, 'replica'), (1, 'replica'), (3, 'replica')]
2025-11-22 23:35:20,702 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:35:20,703 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:35:27,569 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:27,570 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:33,257 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:35:34,426 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:35:34,653 - [PORT:9002] - __main__ - INFO - Configured node port: 9002
2025-11-22 23:35:34,654 - [PORT:9002] - __main__ - INFO - Logging to file: C:\Users\Manu\OneDrive\Escritorio\UTN\TP-IASC\app\cluster.log
2025-11-22 23:35:34,656 - [PORT:9002] - __main__ - INFO - Configuring CORS middleware
2025-11-22 23:35:34,656 - [PORT:9002] - __main__ - INFO - Including routers
2025-11-22 23:35:34,670 - [PORT:9002] - __main__ - DEBUG - Operators router included
2025-11-22 23:35:34,691 - [PORT:9002] - __main__ - DEBUG - Users router included
2025-11-22 23:35:34,706 - [PORT:9002] - __main__ - DEBUG - Windows router included
2025-11-22 23:35:34,728 - [PORT:9002] - __main__ - DEBUG - Reservations router included
2025-11-22 23:35:34,742 - [PORT:9002] - __main__ - DEBUG - Cluster router included
2025-11-22 23:35:34,744 - [PORT:9002] - __main__ - INFO - Starting uvicorn server on localhost:9002
2025-11-22 23:35:34,755 - [PORT:9002] - asyncio - DEBUG - Using proactor: IocpProactor
2025-11-22 23:35:34,798 - [PORT:9002] - __main__ - INFO - Starting application lifespan...
2025-11-22 23:35:34,799 - [PORT:9002] - __main__ - INFO - Initializing services with storage
2025-11-22 23:35:34,799 - [PORT:9002] - services.notification_service - DEBUG - Setting storage for NotificationService
2025-11-22 23:35:34,800 - [PORT:9002] - services.window_service - DEBUG - Setting storage for WindowService
2025-11-22 23:35:34,801 - [PORT:9002] - services.window_service - DEBUG - Setting notification service for WindowService
2025-11-22 23:35:34,802 - [PORT:9002] - services.reservation_service - DEBUG - Setting storage for ReservationService
2025-11-22 23:35:34,802 - [PORT:9002] - services.reservation_service - DEBUG - Setting window service for ReservationService
2025-11-22 23:35:34,803 - [PORT:9002] - services.reservation_service - DEBUG - Setting notification service for ReservationService
2025-11-22 23:35:34,804 - [PORT:9002] - services.node_recovery_service - INFO - Storage set for health check service
2025-11-22 23:35:34,804 - [PORT:9002] - __main__ - INFO - Services initialized successfully
2025-11-22 23:35:34,805 - [PORT:9002] - __main__ - INFO - Initializing cluster manager...
2025-11-22 23:35:34,805 - [PORT:9002] - cluster.cluster_manager - INFO - Initializing cluster manager...
2025-11-22 23:35:34,806 - [PORT:9002] - cluster.cluster_manager - INFO - Cluster manager initialized - waiting for shard assignments
2025-11-22 23:35:34,807 - [PORT:9002] - __main__ - INFO - Cluster manager initialized successfully
2025-11-22 23:35:34,808 - [PORT:9002] - __main__ - INFO - Starting background tasks...
2025-11-22 23:35:34,810 - [PORT:9002] - __main__ - INFO - Background tasks started successfully
2025-11-22 23:35:34,812 - [PORT:9002] - services.notification_service - INFO - Starting notification service loop
2025-11-22 23:35:34,813 - [PORT:9002] - services.window_service - INFO - Starting window monitoring loop
2025-11-22 23:35:34,814 - [PORT:9002] - cluster.modification_history - INFO - Starting modification history cleanup loop
2025-11-22 23:35:34,815 - [PORT:9002] - services.node_recovery_service - INFO - Starting health check service
2025-11-22 23:35:34,865 - [PORT:9002] - services.node_recovery_service - INFO - Health check loop started (interval: 30s)
2025-11-22 23:35:34,866 - [PORT:9002] - services.node_recovery_service - DEBUG - No master shards on this node, skipping health check
2025-11-22 23:35:34,950 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:35:34,951 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:35:34,953 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:35:34,954 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:35:34,955 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:35:35,409 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:35,410 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:35,410 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:39,152 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:35:39,153 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:35:39,153 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (0, 'replica'), (1, 'replica'), (3, 'replica')]
2025-11-22 23:35:39,154 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:35:39,155 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:35:39,240 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:35:39,241 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:35:39,242 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (1, 'replica'), (2, 'replica')]
2025-11-22 23:35:39,243 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:35:39,244 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:35:39,515 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:39,516 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:39,517 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:40,063 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:40,066 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:40,067 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:47,984 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:47,984 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:47,984 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:48,336 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:35:48,367 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:35:49,432 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:35:49,463 - [PORT:9000] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:35:49,838 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:35:51,910 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:35:51,912 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:35:51,913 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'replica'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:35:51,915 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:35:51,916 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:35:52,466 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:52,468 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:52,470 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:56,120 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:35:56,120 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:35:56,121 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (0, 'replica'), (1, 'replica'), (3, 'replica')]
2025-11-22 23:35:56,122 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:35:56,123 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:35:56,178 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:35:56,179 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:35:56,180 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (1, 'replica'), (2, 'replica')]
2025-11-22 23:35:56,181 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:35:56,182 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:35:56,485 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:56,485 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:56,486 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:35:56,554 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:35:56,556 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:35:56,557 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'master'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:35:56,558 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:35:56,559 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:00,538 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:00,539 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:00,539 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:00,706 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:00,711 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:00,712 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (2, 'master'), (1, 'replica'), (3, 'replica')]
2025-11-22 23:36:00,713 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:00,717 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:00,748 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:00,749 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:00,753 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (0, 'replica'), (1, 'replica'), (3, 'replica')]
2025-11-22 23:36:00,756 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:00,758 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:00,799 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:00,800 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:00,802 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:36:00,804 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:00,805 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:00,865 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:00,866 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:00,868 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (1, 'replica'), (2, 'replica')]
2025-11-22 23:36:00,870 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:00,871 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:03,384 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:04,430 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:04,851 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:04,852 - [PORT:9002] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:36:05,013 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:05,014 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:05,016 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (2, 'replica'), (1, 'replica')]
2025-11-22 23:36:05,017 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:05,018 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:11,454 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:11,455 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:11,456 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'master'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:36:11,457 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:11,458 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:15,216 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:15,217 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:15,218 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:15,649 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:15,650 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:15,652 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (0, 'replica'), (1, 'replica'), (3, 'replica')]
2025-11-22 23:36:15,659 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:15,661 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:15,723 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:15,724 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:15,725 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (1, 'replica'), (2, 'replica')]
2025-11-22 23:36:15,727 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:15,727 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:15,756 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:15,756 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:15,756 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:16,202 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:16,203 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:16,205 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:18,384 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:36:18,385 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:18,799 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:18,800 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:18,801 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (1, 'replica'), (0, 'replica'), (3, 'replica')]
2025-11-22 23:36:18,802 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:18,803 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:18,868 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:18,868 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:18,869 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (2, 'replica'), (0, 'replica'), (3, 'replica')]
2025-11-22 23:36:18,870 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:18,871 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:18,890 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:18,890 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:18,892 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (2, 'master'), (1, 'replica'), (3, 'replica')]
2025-11-22 23:36:18,893 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:18,894 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:18,947 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:18,947 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:18,948 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (0, 'replica'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:36:18,949 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:18,950 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:19,442 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:19,443 - [PORT:9000] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:36:19,851 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:23,049 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:23,050 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:23,051 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'replica'), (1, 'replica'), (0, 'replica')]
2025-11-22 23:36:23,052 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:23,053 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:23,172 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:23,172 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:23,173 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (2, 'replica'), (1, 'replica')]
2025-11-22 23:36:23,174 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:23,175 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:23,573 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:23,575 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:23,577 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (0, 'master'), (1, 'replica'), (3, 'replica')]
2025-11-22 23:36:23,578 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:23,579 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:23,654 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:23,655 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:23,656 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(1, 'master'), (2, 'replica'), (0, 'replica'), (3, 'replica')]
2025-11-22 23:36:23,657 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:23,658 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:27,708 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:27,708 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:27,709 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:27,837 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:27,837 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:27,838 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (2, 'replica'), (0, 'replica'), (1, 'replica')]
2025-11-22 23:36:27,839 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:27,840 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:33,334 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:33,334 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:33,336 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:33,389 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:34,463 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:34,845 - [PORT:9002] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:36:34,846 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:37,919 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:37,919 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:37,920 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'master'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:36:37,921 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:37,922 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:40,200 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:40,201 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:40,201 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:42,132 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:42,132 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:42,133 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (0, 'replica'), (1, 'replica'), (3, 'replica')]
2025-11-22 23:36:42,134 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:42,135 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:42,190 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:42,191 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:42,192 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (1, 'replica'), (2, 'replica')]
2025-11-22 23:36:42,193 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:42,194 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:42,602 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:42,603 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:42,603 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:45,821 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:45,822 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:45,823 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:48,396 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:36:48,397 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:49,455 - [PORT:9000] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:36:49,456 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:49,847 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:36:52,754 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:52,755 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:52,756 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:54,951 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:54,952 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:54,953 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'master'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:36:54,954 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:54,955 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:58,415 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:58,416 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:58,419 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:59,131 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:59,131 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:59,132 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (0, 'replica'), (1, 'replica'), (3, 'replica')]
2025-11-22 23:36:59,133 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:59,134 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:59,197 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:36:59,197 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:36:59,198 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (1, 'replica'), (2, 'replica')]
2025-11-22 23:36:59,199 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:36:59,200 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:36:59,634 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:59,634 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:36:59,642 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:03,405 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:37:04,475 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:37:04,847 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:37:04,848 - [PORT:9002] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:37:05,223 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:05,225 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:05,224 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:10,923 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:10,927 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:10,928 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:11,978 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:37:11,979 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:37:11,980 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'master'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:37:11,981 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:37:11,982 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:37:16,200 - [PORT:9000] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:37:16,201 - [PORT:9000] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:37:16,202 - [PORT:9000] - cluster.cluster_manager - INFO - Updated self shards: [(2, 'master'), (0, 'replica'), (1, 'replica'), (3, 'replica')]
2025-11-22 23:37:16,205 - [PORT:9000] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:37:16,205 - [PORT:9000] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:37:16,264 - [PORT:9002] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:37:16,265 - [PORT:9002] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:37:16,266 - [PORT:9002] - cluster.cluster_manager - INFO - Updated self shards: [(3, 'master'), (0, 'replica'), (1, 'replica'), (2, 'replica')]
2025-11-22 23:37:16,267 - [PORT:9002] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:37:16,268 - [PORT:9002] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:37:16,728 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:16,729 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:16,730 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:17,771 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:17,779 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:17,783 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:18,416 - [PORT:9001] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:37:18,417 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:37:19,478 - [PORT:9000] - services.node_recovery_service - DEBUG - No blocked replica nodes to check
2025-11-22 23:37:19,479 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:37:19,849 - [PORT:9002] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:37:23,401 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:23,402 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:23,402 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:29,093 - [PORT:9001] - routers.cluster - INFO - Received shard update notification
2025-11-22 23:37:29,094 - [PORT:9001] - cluster.cluster_manager - INFO - Updating shard state with 4 instances
2025-11-22 23:37:29,095 - [PORT:9001] - cluster.cluster_manager - INFO - Updated self shards: [(0, 'master'), (1, 'master'), (2, 'replica'), (3, 'replica')]
2025-11-22 23:37:29,096 - [PORT:9001] - cluster.cluster_manager - INFO - Shard state updated - Total shards: 4, Cluster nodes: 3
2025-11-22 23:37:29,097 - [PORT:9001] - routers.cluster - INFO - Shard state updated successfully
2025-11-22 23:37:30,286 - [PORT:9000] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:30,288 - [PORT:9002] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:30,289 - [PORT:9001] - __main__ - DEBUG - Health check endpoint called
2025-11-22 23:37:33,411 - [PORT:9001] - storage - DEBUG - Retrieving all windows - Count: 0
2025-11-22 23:37:34,563 - [PORT:9000] - storage - DEBUG - Retrieving all windows - Count: 0
